<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PreorderTokens - È¢ÑË¥≠‰ª£Â∏Å - SolidityÂ≠¶‰π†</title>
    <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&family=Reenie+Beanie&family=Comic+Neue:ital,wght@0,400;0,700;1,400&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --easy: #43AA8B;
            --medium: #F8961E;
            --hard: #E71D36;
            --expert: #7209B7;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
            color: var(--dark);
            line-height: 1.8;
            background-image: radial-gradient(#d0e3ff 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        .nav-bar {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .back-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 10px;
            font-family: 'Comic Neue', cursive;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .back-btn:hover {
            background: var(--secondary);
            transform: translateX(-3px);
        }
        
        .nav-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.3rem;
            color: var(--secondary);
        }
        
        .nav-right {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 5px 15px;
            border-radius: 8px;
            font-family: 'Comic Neue', cursive;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .nav-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .hero-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border-top: 5px solid var(--hard);
        }
        
        .hero-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .hero-title {
            flex: 1;
            min-width: 250px;
        }
        
        .day-badge {
            background: linear-gradient(135deg, var(--hard), #c72828);
            color: white;
            padding: 8px 20px;
            border-radius: 15px;
            font-family: 'Gochi Hand', cursive;
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        h1 {
            font-family: 'Gochi Hand', cursive;
            font-size: 2.8rem;
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .meta-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .difficulty-badge {
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            color: white;
            font-size: 1rem;
        }
        
        .tag {
            background: var(--light);
            padding: 5px 15px;
            border-radius: 15px;
            color: var(--secondary);
            font-size: 0.9rem;
        }
        
        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px dashed var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .key-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .key-point {
            background: linear-gradient(135deg, #ffe6e6, #ffd6d6);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--hard);
        }
        
        .key-point-title {
            font-weight: bold;
            color: var(--hard);
            margin-bottom: 5px;
        }
        
        .concept-card {
            background: linear-gradient(135deg, #fff0f0, #ffe6e6);
            border-left: 5px solid var(--hard);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .concept-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.4rem;
            color: var(--hard);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        pre {
            background: #282c34;
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
            margin: 15px 0;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
        }
        
        code {
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #f8f8f2;
        }
        
        .inline-code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Fira Code', monospace;
            color: var(--hard);
            font-size: 0.9em;
        }
        
        .navigation-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .nav-footer-btn {
            flex: 1;
            min-width: 200px;
            background: white;
            border: 3px solid var(--primary);
            padding: 20px;
            border-radius: 15px;
            text-decoration: none;
            color: var(--dark);
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .nav-footer-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .nav-footer-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .nav-footer-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.3rem;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .hero-section {
                padding: 25px;
            }
            
            .section {
            padding: 20px;
            }
            
            .key-points {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <div class="nav-left">
        <a href="index.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> ËøîÂõûÈ¶ñÈ°µ
        </a>
            <span class="nav-title">Á¨¨13Â§© - ‰ª£Â∏ÅÈîÄÂîÆ‰∏éÈîÅÂÆö</span>
        </div>
        <div class="nav-right">
            <a href="#concepts" class="nav-btn">üìö Ê†∏ÂøÉÊ¶ÇÂøµ</a>
            <a href="#code" class="nav-btn">üíª ‰ª£Á†ÅËÆ≤Ëß£</a>
            <a href="#practice" class="nav-btn">üéØ ÂÆûË∑µ</a>
        </div>
    </div>

    <div class="container">
        <div class="hero-section">
            <div class="hero-header">
                <div class="hero-title">
                    <div class="day-badge">Á¨¨ 13 Â§© üé´</div>
            <h1>PreorderTokens - È¢ÑË¥≠‰ª£Â∏Å</h1>
                    <p class="subtitle">‰ª£Â∏ÅÈîÄÂîÆÂêàÁ∫¶ - virtual/override‰∏éÊó∂Èó¥ÈîÅ</p>
                </div>
                <div class="meta-tags">
                    <div class="difficulty-badge" style="background: var(--hard);">
                        üå≥ È´òÁ∫ß
                    </div>
                    <span class="tag">virtual</span>
                    <span class="tag">override</span>
                    <span class="tag">Êó∂Èó¥ÈîÅ</span>
                <span class="tag">ICO</span>
                </div>
            </div>
            
            <div class="key-points">
                <div class="key-point">
                    <div class="key-point-title">üìå Â≠¶‰π†ÁõÆÊ†á</div>
                    <div>ÊéåÊè°ÂáΩÊï∞ÈáçÂÜôÂíå‰ª£Â∏ÅÈîÄÂîÆÊú∫Âà∂</div>
                </div>
                <div class="key-point">
                    <div class="key-point-title">üéØ Ê†∏ÂøÉÊäÄËÉΩ</div>
                    <div>virtual/override„ÄÅsuper„ÄÅÊó∂Èó¥ÊéßÂà∂</div>
                </div>
                <div class="key-point">
                    <div class="key-point-title">‚è±Ô∏è È¢ÑËÆ°Êó∂Èó¥</div>
                    <div>90ÂàÜÈíü</div>
                </div>
                <div class="key-point">
                    <div class="key-point-title">üî• ÈöæÂ∫¶Á≥ªÊï∞</div>
                    <div>‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </div>
            </div>
        </div>

        <div class="section" id="concepts">
            <h2 class="section-title">
                <i class="fas fa-lightbulb"></i> Ê†∏ÂøÉÊ¶ÇÂøµËØ¶Ëß£
            </h2>
            
            <div class="concept-card">
                <div class="concept-title">üîÑ virtual Âíå override</div>
                <p>ÂÖÅËÆ∏Â≠êÂêàÁ∫¶ÈáçÂÜôÁà∂ÂêàÁ∫¶ÁöÑÂáΩÊï∞:</p>
                <pre><code class="language-solidity">// Áà∂ÂêàÁ∫¶
contract SimpleERC20 {
    function transfer(address _to, uint256 _value) 
        public 
        virtual  // Ê†áËÆ∞‰∏∫ÂèØË¢´ÈáçÂÜô
        returns (bool) 
    {
        _transfer(msg.sender, _to, _value);
        return true;
    }
}

// Â≠êÂêàÁ∫¶
contract TokenSale is SimpleERC20 {
    function transfer(address _to, uint256 _value) 
        public 
        override  // ÈáçÂÜôÁà∂ÂêàÁ∫¶ÂáΩÊï∞
        returns (bool) 
    {
        // Ê∑ªÂä†È¢ùÂ§ñÈÄªËæë
        require(finalized, "Tokens are locked");
        
        // Ë∞ÉÁî®Áà∂ÂêàÁ∫¶ÁöÑÂéüÂßãÂáΩÊï∞
        return super.transfer(_to, _value);
    }
}</code></pre>
                <p><strong>ÂÖ≥ÈîÆÁÇπ:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li><code class="inline-code">virtual</code>: Áà∂ÂêàÁ∫¶Ê†áËÆ∞ÂáΩÊï∞ÂèØË¢´ÈáçÂÜô</li>
                    <li><code class="inline-code">override</code>: Â≠êÂêàÁ∫¶Ê†áËÆ∞Ê≠£Âú®ÈáçÂÜôÁà∂ÂáΩÊï∞</li>
                    <li><code class="inline-code">super</code>: Ë∞ÉÁî®Áà∂ÂêàÁ∫¶ÁöÑÂáΩÊï∞</li>
                    <li>ÂáΩÊï∞Á≠æÂêçÂøÖÈ°ªÂÆåÂÖ®ÂåπÈÖç</li>
                </ul>
            </div>

            <div class="concept-card">
                <div class="concept-title">üîí ‰ª£Â∏ÅÈîÅÂÆöÊú∫Âà∂</div>
                <p>Âú®‰ª£Â∏ÅÈîÄÂîÆÊúüÈó¥Èò≤Ê≠¢ËΩ¨Ë¥¶,‰øùÊä§ÊäïËµÑËÄÖ:</p>
                <pre><code class="language-solidity">bool public finalized = false;

function transfer(address _to, uint256 _value) public override returns (bool) {
    // Â¶ÇÊûúÈîÄÂîÆÊú™ÂÆåÊàê,Á¶ÅÊ≠¢ËΩ¨Ë¥¶
    if (!finalized && msg.sender != address(this)) {
        require(false, "Tokens are locked until sale is finalized");
    }
    return super.transfer(_to, _value);
}</code></pre>
                <p><strong>‰∏∫‰ªÄ‰πàÈúÄË¶ÅÈîÅÂÆö?</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li>Èò≤Ê≠¢Êó©ÊúüÊäïËµÑËÄÖÂú®ÈîÄÂîÆÊúüÈó¥ÊäõÂîÆ</li>
                    <li>Á°Æ‰øùÂÖ¨Âπ≥ÁöÑ‰ª£Â∏ÅÂàÜÈÖç</li>
                    <li>ÈÅøÂÖç‰ª∑Ê†ºÊìçÁ∫µ</li>
                    <li>‰øùÊä§È°πÁõÆÊñπÁ≠πÈõÜËµÑÈáë</li>
                </ul>
                
                <div style="background: #fff9e6; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <strong style="color: #856404;">üí° ‰æãÂ§ñ:</strong>
                    <span style="color: #856404;"> ÂêàÁ∫¶Ëá™Â∑±(<code class="inline-code">address(this)</code>)‰ªçÁÑ∂ÂèØ‰ª•ËΩ¨Ë¥¶,ËøôÊ†∑ÊâçËÉΩÂú®Ë¥≠‰π∞Êó∂Â∞Ü‰ª£Â∏ÅËΩ¨Áªô‰π∞ÂÆ∂!</span>
                </div>
            </div>

            <div class="concept-card">
                <div class="concept-title">‚è∞ Êó∂Èó¥ÊéßÂà∂ - ÈîÄÂîÆÂë®Êúü</div>
                <pre><code class="language-solidity">uint256 public saleStartTime;
uint256 public saleEndTime;

constructor(uint256 _startTime, uint256 _duration) {
    saleStartTime = _startTime;
    saleEndTime = _startTime + _duration;
}

function isSaleActive() public view returns (bool) {
    return block.timestamp >= saleStartTime && 
           block.timestamp <= saleEndTime && 
           !finalized;
}</code></pre>
                <p><strong>Êó∂Èó¥Á∫øÁ§∫‰æã:</strong></p>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                    <pre><code>ÈÉ®ÁΩ≤Êó∂Èó¥: 2024-01-01 00:00:00
ÈîÄÂîÆÂºÄÂßã: 2024-01-10 00:00:00 (saleStartTime)
ÈîÄÂîÆÊåÅÁª≠: 30Â§©
ÈîÄÂîÆÁªìÊùü: 2024-02-09 00:00:00 (saleEndTime)

Êó∂Èó¥ËΩ¥:
|---- ÂáÜÂ§áÊúü ----|---- ÈîÄÂîÆÊúü (30Â§©) ----|---- ÈîÄÂîÆÂêé ----|
ÈÉ®ÁΩ≤            ÂºÄÂßã                     ÁªìÊùü            ÂÆåÊàê</code></pre>
                </div>
            </div>

            <div class="concept-card">
                <div class="concept-title">üí∞ ‰ª£Â∏Å‰ª∑Ê†ºËÆ°ÁÆó</div>
                <pre><code class="language-solidity">uint256 public tokenPrice = 0.001 ether;  // ÊØè‰∏™‰ª£Â∏Å0.001 ETH

function buyTokens() public payable {
    // Áî®Êà∑ÂèëÈÄÅ1 ETH,ËÉΩ‰π∞Â§öÂ∞ë‰ª£Â∏Å?
    uint256 tokenAmount = (msg.value * 10**decimals) / tokenPrice;
    
    // ËÆ°ÁÆóËøáÁ®ã:
    // msg.value = 1 ETH = 10^18 wei
    // decimals = 18
    // tokenAmount = (10^18 * 10^18) / (0.001 * 10^18)
    //             = 10^36 / 10^15
    //             = 10^21 ÊúÄÂ∞èÂçï‰Ωç
    //             = 1000 tokens (10^21 / 10^18)
}</code></pre>
                
                <p style="margin-top: 15px;"><strong>ÂÖ¨ÂºèÊé®ÂØº:</strong></p>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                    <code>‰ª£Â∏ÅÊï∞Èáè = (ÊîØ‰ªòÁöÑETH √ó 10^decimals) √∑ Âçï‰∏™‰ª£Â∏Å‰ª∑Ê†º</code><br><br>
                    <code>‰æã: 1 ETH √∑ 0.001 ETH/token = 1000 tokens</code>
                </div>
            </div>

            <div class="concept-card">
                <div class="concept-title">üìä receive() - Ëá™Âä®Ë¥≠‰π∞</div>
                <pre><code class="language-solidity">receive() external payable {
    buyTokens();
}

// Áî®Êà∑Áõ¥Êé•ÂêëÂêàÁ∫¶ÂèëÈÄÅETH,Ëá™Âä®Ëß¶ÂèëË¥≠‰π∞
// ‰∏çÈúÄË¶ÅË∞ÉÁî®ÂáΩÊï∞!</code></pre>
                <p><strong>Â∑•‰ΩúÂéüÁêÜ:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li><code class="inline-code">receive()</code>Âú®ÂêàÁ∫¶Êî∂Âà∞Á∫ØETHÊó∂Ëá™Âä®Ë∞ÉÁî®</li>
                    <li>ÂøÖÈ°ªÊ†áËÆ∞‰∏∫<code class="inline-code">external payable</code></li>
                    <li>‰∏çËÉΩÊúâÂèÇÊï∞,‰∏çËÉΩËøîÂõûÂÄº</li>
                    <li>Êèê‰æõÊõ¥Â•ΩÁöÑÁî®Êà∑‰ΩìÈ™å</li>
                </ul>
            </div>
        </div>

        <div class="section" id="code">
            <h2 class="section-title">
                <i class="fas fa-code"></i> ÂÆåÊï¥‰ª£Á†ÅËØ¶Ëß£
            </h2>
            
            <h3 style="color: var(--secondary); margin: 20px 0;">üìÑ Ê≠•È™§1: ‰øÆÊîπSimpleERC20‰∏∫virtual</h3>
            <pre><code class="language-solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract SimpleERC20 {
    string public name = "SimpleToken";
    string public symbol = "SIM";
    uint8 public decimals = 18;
    uint256 public totalSupply;
    
    mapping(address => uint256) public balanceOf;
    mapping(address => mapping(address => uint256)) public allowance;
    
    event Transfer(address indexed from, address indexed to, uint256 value);
    event Approval(address indexed owner, address indexed spender, uint256 value);
    
    constructor(uint256 _initialSupply) {
        totalSupply = _initialSupply * (10 ** uint256(decimals));
        balanceOf[msg.sender] = totalSupply;
        emit Transfer(address(0), msg.sender, totalSupply);
    }
    
    function _transfer(address _from, address _to, uint256 _value) internal {
        require(balanceOf[_from] >= _value, "Insufficient balance");
        balanceOf[_from] -= _value;
        balanceOf[_to] += _value;
        emit Transfer(_from, _to, _value);
    }
    
    // ‚úÖ Ê∑ªÂä†virtualÂÖ≥ÈîÆÂ≠ó
    function transfer(address _to, uint256 _value) public virtual returns (bool) {
        require(_to != address(0), "Invalid address");
        _transfer(msg.sender, _to, _value);
        return true;
    }
    
    function approve(address _spender, uint256 _value) public returns (bool) {
        require(_spender != address(0), "Invalid address");
        allowance[msg.sender][_spender] = _value;
        emit Approval(msg.sender, _spender, _value);
        return true;
    }
    
    // ‚úÖ Ê∑ªÂä†virtualÂÖ≥ÈîÆÂ≠ó
    function transferFrom(address _from, address _to, uint256 _value) public virtual returns (bool) {
        require(_to != address(0), "Invalid address");
        require(_value <= allowance[_from][msg.sender], "Allowance exceeded");
        allowance[_from][msg.sender] -= _value;
        _transfer(_from, _to, _value);
        return true;
    }
}</code></pre>

            <h3 style="color: var(--secondary); margin: 30px 0 20px 0;">üìÑ Ê≠•È™§2: TokenSaleÂêàÁ∫¶(ÁªßÊâøÂπ∂ÈáçÂÜô)</h3>
            <pre><code class="language-solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "./SimpleERC20.sol";

contract SimplifiedTokenSale is SimpleERC20 {
    uint256 public tokenPrice;
    uint256 public saleStartTime;
    uint256 public saleEndTime;
    uint256 public minPurchase;
    uint256 public maxPurchase;
    uint256 public totalRaised;
    address public projectOwner;
    bool public finalized = false;
    bool private initialTransferDone = false;
    
    event TokensPurchased(address indexed buyer, uint256 etherAmount, uint256 tokenAmount);
    event SaleFinalized(uint256 totalRaised, uint256 totalTokensSold);
    
    constructor(
        uint256 _initialSupply,
        uint256 _tokenPrice,
        uint256 _saleStartTime,
        uint256 _saleDuration,
        uint256 _minPurchase,
        uint256 _maxPurchase
    ) SimpleERC20(_initialSupply) {
        tokenPrice = _tokenPrice;
        saleStartTime = _saleStartTime;
        saleEndTime = _saleStartTime + _saleDuration;
        minPurchase = _minPurchase;
        maxPurchase = _maxPurchase;
        projectOwner = msg.sender;
        
        // Â∞ÜÊâÄÊúâ‰ª£Â∏ÅËΩ¨Âà∞ÂêàÁ∫¶
        _transfer(msg.sender, address(this), totalSupply);
        initialTransferDone = true;
    }
    
    // Ê£ÄÊü•ÈîÄÂîÆÊòØÂê¶ÊøÄÊ¥ª
    function isSaleActive() public view returns (bool) {
        return block.timestamp >= saleStartTime && 
               block.timestamp <= saleEndTime && 
               !finalized;
    }
    
    // Ë¥≠‰π∞‰ª£Â∏Å
    function buyTokens() public payable {
        require(isSaleActive(), "Sale not active");
        require(msg.value >= minPurchase && msg.value <= maxPurchase, "Invalid purchase amount");
        
        uint256 tokenAmount = (msg.value * 10**uint256(decimals)) / tokenPrice;
        require(balanceOf[address(this)] >= tokenAmount, "Insufficient tokens");
        
        _transfer(address(this), msg.sender, tokenAmount);
        totalRaised += msg.value;
        
        emit TokensPurchased(msg.sender, msg.value, tokenAmount);
    }
    
    // ‚úÖ ÈáçÂÜôtransfer - Ê∑ªÂä†ÈîÅÂÆöÈÄªËæë
    function transfer(address _to, uint256 _value) public override returns (bool) {
        if (!finalized && msg.sender != address(this) && initialTransferDone) {
            require(false, "Tokens are locked until sale is finalized");
        }
        return super.transfer(_to, _value);
    }
    
    // ‚úÖ ÈáçÂÜôtransferFrom - Ê∑ªÂä†ÈîÅÂÆöÈÄªËæë
    function transferFrom(address _from, address _to, uint256 _value) public override returns (bool) {
        if (!finalized && _from != address(this) && initialTransferDone) {
            require(false, "Tokens are locked until sale is finalized");
        }
        return super.transferFrom(_from, _to, _value);
    }
    
    // ÂÆåÊàêÈîÄÂîÆ
    function finalizeSale() public payable {
        require(msg.sender == projectOwner, "Only owner");
        require(block.timestamp > saleEndTime, "Sale not ended");
        require(!finalized, "Already finalized");
        
        finalized = true;
        
        // Â∞ÜÁ≠πÈõÜÁöÑETHËΩ¨ÁªôÈ°πÁõÆÊñπ
        (bool success, ) = projectOwner.call{value: address(this).balance}("");
        require(success, "Transfer failed");
        
        emit SaleFinalized(totalRaised, totalSupply - balanceOf[address(this)]);
    }
    
    // Â∑•ÂÖ∑ÂáΩÊï∞
    function timeRemaining() public view returns (uint256) {
        if (block.timestamp >= saleEndTime) return 0;
        return saleEndTime - block.timestamp;
    }
    
    function tokensAvailable() public view returns (uint256) {
        return balanceOf[address(this)];
    }
    
    // Êé•Êî∂Áõ¥Êé•ÂèëÈÄÅÁöÑETH
    receive() external payable {
        buyTokens();
    }
}</code></pre>

            <div style="background: linear-gradient(135deg, #d4edda, #c3e6cb); border-left: 5px solid #28a745; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <strong style="color: #155724;">‚úÖ ÂêàÁ∫¶ÂäüËÉΩ</strong>
                <p style="margin-top: 10px; color: #155724;">ËøôÊòØ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ‰ª£Â∏ÅÈîÄÂîÆ(ICO)ÂêàÁ∫¶„ÄÇÈ°πÁõÆÊñπÂèØ‰ª•ËÆæÁΩÆ‰ª£Â∏Å‰ª∑Ê†º„ÄÅÈîÄÂîÆÊó∂Èó¥„ÄÅË¥≠‰π∞ÈôêÈ¢ù„ÄÇÊäïËµÑËÄÖÂú®ÈîÄÂîÆÊúüÈó¥Ë¥≠‰π∞‰ª£Â∏Å,‰ΩÜ‰ª£Â∏ÅË¢´ÈîÅÂÆö„ÄÇÈîÄÂîÆÁªìÊùüÂêé,È°πÁõÆÊñπÂÆåÊàêÈîÄÂîÆ,‰ª£Â∏ÅËß£ÈîÅ,ÊäïËµÑËÄÖÂèØ‰ª•Ëá™Áî±ËΩ¨Ë¥¶„ÄÇ</p>
            </div>

            <h3 style="color: var(--secondary); margin: 30px 0 20px 0;">üîç ÂÖ≥ÈîÆ‰ª£Á†ÅËß£Êûê</h3>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">1. ÊûÑÈÄ†ÂáΩÊï∞ÊâßË°åÊµÅÁ®ã</h4>
                <pre><code class="language-solidity">constructor(...) SimpleERC20(_initialSupply) {
    // 1. ÂÖàÊâßË°åÁà∂ÂêàÁ∫¶ÊûÑÈÄ†ÂáΩÊï∞
    //    - Èì∏ÈÄ†ÊâÄÊúâ‰ª£Â∏ÅÁªômsg.sender
    //    - balanceOf[deployer] = totalSupply
    
    // 2. ËÆæÁΩÆÈîÄÂîÆÂèÇÊï∞
    tokenPrice = _tokenPrice;
    saleStartTime = _saleStartTime;
    saleEndTime = _saleStartTime + _saleDuration;
    // ...
    
    // 3. Â∞ÜÊâÄÊúâ‰ª£Â∏Å‰ªédeployerËΩ¨Âà∞ÂêàÁ∫¶
    _transfer(msg.sender, address(this), totalSupply);
    // balanceOf[deployer] = 0
    // balanceOf[this contract] = totalSupply
    
    // 4. Ê†áËÆ∞ÂàùÂßãËΩ¨Ë¥¶ÂÆåÊàê
    initialTransferDone = true;
}</code></pre>
            </div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">2. Ë¥≠‰π∞ÊµÅÁ®ãËØ¶Ëß£</h4>
                <pre><code class="language-solidity">// Âú∫ÊôØ: AliceÁî®1 ETHË¥≠‰π∞‰ª£Â∏Å
// tokenPrice = 0.001 ETH

buyTokens{value: 1 ether}();

// Ê≠•È™§1: Ê£ÄÊü•ÈîÄÂîÆÊøÄÊ¥ª
require(isSaleActive());  ‚úÖ

// Ê≠•È™§2: Ê£ÄÊü•Ë¥≠‰π∞ÈáëÈ¢ù
require(1 ether >= minPurchase && 1 ether <= maxPurchase);  ‚úÖ

// Ê≠•È™§3: ËÆ°ÁÆó‰ª£Â∏ÅÊï∞Èáè
tokenAmount = (1 ether * 10^18) / 0.001 ether
            = (10^18 * 10^18) / (10^15)
            = 10^21 ÊúÄÂ∞èÂçï‰Ωç
            = 1000 tokens

// Ê≠•È™§4: Ê£ÄÊü•ÂêàÁ∫¶‰ΩôÈ¢ù
require(balanceOf[contract] >= 1000 tokens);  ‚úÖ

// Ê≠•È™§5: ËΩ¨Ë¥¶(ÂêàÁ∫¶ÂèØ‰ª•ËΩ¨,Âõ†‰∏∫msg.sender == address(this))
_transfer(address(this), Alice, 1000 tokens);

// Ê≠•È™§6: ËÆ∞ÂΩï
totalRaised += 1 ether;

// Ê≠•È™§7: Ëß¶Âèë‰∫ã‰ª∂
emit TokensPurchased(Alice, 1 ether, 1000 tokens);</code></pre>
            </div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">3. ÈîÅÂÆöÊú∫Âà∂ËØ¶Ëß£</h4>
                <pre><code class="language-solidity">// Âú∫ÊôØ1: AliceËØïÂõæÂú®ÈîÄÂîÆÊúüÈó¥ËΩ¨Ë¥¶
AliceË∞ÉÁî®: token.transfer(Bob, 100);

ÊâßË°å:
  finalized = false  ‚úÖ
  msg.sender = Alice (‰∏çÊòØaddress(this))  ‚úÖ
  initialTransferDone = true  ‚úÖ
  
  require(false, "Tokens are locked");  ‚ùå Â§±Ë¥•!

// Âú∫ÊôØ2: ÂêàÁ∫¶Âú®Ë¥≠‰π∞Êó∂ËΩ¨Ë¥¶ÁªôAlice
ContractË∞ÉÁî®: _transfer(address(this), Alice, 100);

ÊâßË°å:
  ÂÜÖÈÉ®ÈÄöËøásuper.transfer()Ë∞ÉÁî®
  ‰ΩÜmsg.senderÂú®_transferÂÜÖÈÉ®ÁöÑ‰∏ä‰∏ãÊñá‰∏çÂêå
  ÂÆûÈôÖ‰∏äÁõ¥Êé•‰øÆÊîπbalanceOf,‰∏çËß¶ÂèëÈîÅÂÆöÊ£ÄÊü•  ‚úÖ

// Âú∫ÊôØ3: ÈîÄÂîÆÂÆåÊàêÂêéAliceËΩ¨Ë¥¶
finalizeSale();  // finalized = true

AliceË∞ÉÁî®: token.transfer(Bob, 100);

ÊâßË°å:
  finalized = true  ‚úÖ
  ifÊù°‰ª∂‰∏çÊª°Ë∂≥,Áõ¥Êé•ÊâßË°åsuper.transfer()  ‚úÖ</code></pre>
            </div>
        </div>

        <div class="section" id="practice">
            <h2 class="section-title">
                <i class="fas fa-dumbbell"></i> ÂÆûË∑µ‰∏éÁªÉ‰π†
            </h2>
            
            <h3 style="color: var(--secondary); margin-bottom: 20px;">üìù RemixÂÆûÊàòÊ≠•È™§</h3>
            
            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">Ê≠•È™§1: ÈÉ®ÁΩ≤‰ª£Â∏ÅÈîÄÂîÆ</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>ÂàõÂª∫‰∏§‰∏™Êñá‰ª∂:<code class="inline-code">SimpleERC20.sol</code>Âíå<code class="inline-code">TokenSale.sol</code></li>
                    <li>ÁºñËØëTokenSaleÂêàÁ∫¶</li>
                    <li>ÈÉ®ÁΩ≤ÂèÇÊï∞Á§∫‰æã:
                        <ul style="margin-left: 20px;">
                            <li>_initialSupply: <code class="inline-code">1000000</code> (100‰∏á‰ª£Â∏Å)</li>
                            <li>_tokenPrice: <code class="inline-code">1000000000000000</code> (0.001 ETH)</li>
                            <li>_saleStartTime: <code class="inline-code">(ÂΩìÂâçÊó∂Èó¥Êà≥)</code></li>
                            <li>_saleDuration: <code class="inline-code">2592000</code> (30Â§©)</li>
                            <li>_minPurchase: <code class="inline-code">10000000000000000</code> (0.01 ETH)</li>
                            <li>_maxPurchase: <code class="inline-code">10000000000000000000</code> (10 ETH)</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">Ê≠•È™§2: Ê£ÄÊü•ÂàùÂßãÁä∂ÊÄÅ</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>Ë∞ÉÁî®<code class="inline-code">balanceOf(ÂêàÁ∫¶Âú∞ÂùÄ)</code> - Â∫îËØ•Á≠â‰∫étotalSupply</li>
                    <li>Ë∞ÉÁî®<code class="inline-code">tokensAvailable()</code> - Êü•ÁúãÂèØÂîÆ‰ª£Â∏Å</li>
                    <li>Ë∞ÉÁî®<code class="inline-code">isSaleActive()</code> - Â∫îËØ•ËøîÂõûtrue</li>
                    <li>Ë∞ÉÁî®<code class="inline-code">timeRemaining()</code> - Êü•ÁúãÂâ©‰ΩôÊó∂Èó¥</li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">Ê≠•È™§3: Ë¥≠‰π∞‰ª£Â∏Å</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>ÂàáÊç¢Âà∞Âè¶‰∏Ä‰∏™Ë¥¶Êà∑(ÊäïËµÑËÄÖ)</li>
                    <li>Âú®VALUEËæìÂÖ•Ê°ÜËæìÂÖ•0.1,ÈÄâÊã©Ether</li>
                    <li>Ë∞ÉÁî®<code class="inline-code">buyTokens</code></li>
                    <li>Êü•Áúã‰∫ã‰ª∂<code class="inline-code">TokensPurchased</code></li>
                    <li>Ë∞ÉÁî®<code class="inline-code">balanceOf(ÊäïËµÑËÄÖÂú∞ÂùÄ)</code> - Â∫îËØ•Êúâ100‰∏™‰ª£Â∏Å</li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">Ê≠•È™§4: ÊµãËØïÈîÅÂÆö</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>ÊäïËµÑËÄÖÂ∞ùËØïËΩ¨Ë¥¶:<code class="inline-code">transfer(Âè¶‰∏Ä‰∏™Âú∞ÂùÄ, 10)</code></li>
                    <li>Â∫îËØ•Â§±Ë¥•,ÈîôËØØ‰ø°ÊÅØ:"Tokens are locked until sale is finalized"</li>
                    <li>È™åËØÅ‰ª£Â∏ÅÁ°ÆÂÆûË¢´ÈîÅÂÆö</li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">Ê≠•È™§5: ÂÆåÊàêÈîÄÂîÆ(Ê®°Êãü)</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>Âú®Remix‰∏≠‰øÆÊîπ<code class="inline-code">saleEndTime</code>‰∏∫ËøáÂéªÁöÑÊó∂Èó¥(ÊµãËØïÁî®)</li>
                    <li>ÊàñËÄÖÁ≠âÂæÖÂÆûÈôÖÈîÄÂîÆÊúüÁªìÊùü</li>
                    <li>ÂàáÊç¢ÂõûÈ°πÁõÆÊñπË¥¶Êà∑</li>
                    <li>Ë∞ÉÁî®<code class="inline-code">finalizeSale()</code></li>
                    <li>Êü•Áúã‰∫ã‰ª∂<code class="inline-code">SaleFinalized</code></li>
                    <li>È™åËØÅ<code class="inline-code">finalized() == true</code></li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">Ê≠•È™§6: È™åËØÅËß£ÈîÅ</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>ÂàáÊç¢ÂõûÊäïËµÑËÄÖË¥¶Êà∑</li>
                    <li>ÂÜçÊ¨°Ë∞ÉÁî®<code class="inline-code">transfer(Âè¶‰∏Ä‰∏™Âú∞ÂùÄ, 10)</code></li>
                    <li>ËøôÊ¨°Â∫îËØ•ÊàêÂäü!</li>
                    <li>È™åËØÅ‰ª£Â∏ÅÂ∑≤Ëß£ÈîÅ,ÂèØ‰ª•Ëá™Áî±ËΩ¨Ë¥¶</li>
                </ol>
            </div>

            <h3 style="color: var(--secondary); margin: 40px 0 20px 0;">üéØ ÊåëÊàòÁªÉ‰π†</h3>
            <div style="background: linear-gradient(135deg, #fff9e6, #ffedd5); border-left: 5px solid var(--medium); padding: 25px; border-radius: 10px;">
                <p style="font-weight: bold; margin-bottom: 15px; font-size: 1.1rem;">Â∞ùËØï‰ª•‰∏ãÊîπËøõ:</p>
                <ol style="margin-left: 25px; line-height: 2.2;">
                    <li>Ê∑ªÂä†ÁôΩÂêçÂçïÂäüËÉΩ(Âè™ÊúâÁôΩÂêçÂçïÂú∞ÂùÄÂèØ‰ª•Ë¥≠‰π∞)</li>
                    <li>ÂÆûÁé∞ÂàÜÈò∂ÊÆµÈîÄÂîÆ(Êó©È∏ü‰ª∑„ÄÅÊ≠£Â∏∏‰ª∑„ÄÅÊúÄÂêéÂÜ≤Âà∫‰ª∑)</li>
                    <li>Ê∑ªÂä†ËΩØ‰∏äÈôêÂíåÁ°¨‰∏äÈôê</li>
                    <li>ÂÆûÁé∞ÈÄÄÊ¨æÂäüËÉΩ(Â¶ÇÊûúÊ≤°ËææÂà∞ËΩØ‰∏äÈôê)</li>
                    <li>Ê∑ªÂä†Êé®ËçêÂ•ñÂä±(Êé®Ëçê‰∫∫Ëé∑ÂæóÈ¢ùÂ§ñ‰ª£Â∏Å)</li>
                    <li>ÂÆûÁé∞Ê∏êËøõÂºèËß£ÈîÅ(25%Á´ãÂç≥Ëß£ÈîÅ,Ââ©‰ΩôÂàÜ3‰∏™Êúà)</li>
                    <li>Ê∑ªÂä†Á¥ßÊÄ•ÊöÇÂÅúÂäüËÉΩ</li>
                </ol>
            </div>

            <h3 style="color: var(--secondary); margin: 40px 0 20px 0;">üìö Ê∑±ÂÖ•ÁêÜËß£</h3>
            
            <div style="background: white; border: 2px solid var(--accent); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: var(--primary); margin-bottom: 10px;">virtual„ÄÅoverrideÂíåsuper</h4>
                <pre><code class="language-solidity">contract A {
    function foo() public virtual returns (string memory) {
        return "A";
    }
}

contract B is A {
    function foo() public override returns (string memory) {
        return "B";
    }
}

contract C is B {
    function foo() public override returns (string memory) {
        string memory parent = super.foo();  // Ë∞ÉÁî®BÁöÑfoo
        return string.concat(parent, "+C");  // "B+C"
    }
}</code></pre>
            </div>

            <div style="background: white; border: 2px solid var(--accent); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: var(--primary); margin-bottom: 10px;">ÁúüÂÆû‰∏ñÁïåÁöÑ‰ª£Â∏ÅÈîÄÂîÆ</h4>
                <p>Áé∞‰ª£ICO/IDOÈÄöÂ∏∏ÂåÖÊã¨:</p>
                <ul style="margin: 10px 0 0 20px; line-height: 1.8;">
                    <li><strong>KYC/AML</strong>: Ë∫´‰ªΩÈ™åËØÅ</li>
                    <li><strong>Vesting</strong>: ÈîÅ‰ªìÊúüÂíåÈáäÊîæËÆ°Âàí</li>
                    <li><strong>Cliff</strong>: ÊÇ¨Â¥ñÊúü(‰∏ÄÊÆµÊó∂Èó¥ÂêéÊâçÂºÄÂßãÈáäÊîæ)</li>
                    <li><strong>Cap</strong>: ‰∏™‰∫∫‰∏äÈôêÂíåÊÄª‰∏äÈôê</li>
                    <li><strong>Whitelist</strong>: ÁôΩÂêçÂçï/‰ºòÂÖàË¥≠‰π∞</li>
                    <li><strong>Refund</strong>: Êú™ËææÁõÆÊ†áÈÄÄÊ¨æ</li>
</ul>
            </div>

            <div style="background: white; border: 2px solid var(--accent); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: var(--primary); margin-bottom: 10px;">receive() vs fallback()</h4>
                <pre><code class="language-solidity">// receive: Êé•Êî∂Á∫ØETH(Êó†data)
receive() external payable {
    buyTokens();
}

// fallback: Êé•Êî∂ETH+data Êàñ Ë∞ÉÁî®‰∏çÂ≠òÂú®ÁöÑÂáΩÊï∞
fallback() external payable {
    // Â§ÑÁêÜÂÖ∂‰ªñÊÉÖÂÜµ
}

// Ë∞ÉÁî®‰ºòÂÖàÁ∫ß:
// 1. Â¶ÇÊûúmsg.data‰∏∫Á©∫ -> receive()
// 2. Â¶ÇÊûúreceive()‰∏çÂ≠òÂú®Êàñmsg.data‰∏ç‰∏∫Á©∫ -> fallback()</code></pre>
            </div>
        </div>

        <div class="navigation-footer">
            <a href="contract-12.html" class="nav-footer-btn" style="border-color: var(--accent);">
                <div class="nav-footer-label">‚Üê ‰∏ä‰∏Ä‰∏™</div>
                <div class="nav-footer-title">MyFirstTokenÈ¶ñ‰ª£Â∏Å</div>
            </a>
            <a href="contract-14.html" class="nav-footer-btn" style="border-color: var(--accent);">
                <div class="nav-footer-label">‰∏ã‰∏Ä‰∏™ ‚Üí</div>
                <div class="nav-footer-title">SafeDeposit ÂÆâÂÖ®‰øùÁÆ°ÁÆ±</div>
            </a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/solidity.min.js"></script>
    <script>
        hljs.highlightAll();
        
        // Âπ≥ÊªëÊªöÂä®
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>