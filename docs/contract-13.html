<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PreorderTokens - é¢„è´­ä»£å¸ - Solidityå­¦ä¹ </title>
    <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&family=Reenie+Beanie&family=Comic+Neue:ital,wght@0,400;0,700;1,400&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --easy: #43AA8B;
            --medium: #F8961E;
            --hard: #E71D36;
            --expert: #7209B7;
            --warm-brown: #8B7355;
            --parchment: #F5F1E6;
            --vintage-blue: #6B8E9F;
            --warm-red: #C44536;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
            color: var(--dark);
            line-height: 1.8;
            background-image: radial-gradient(#d0e3ff 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        .nav-bar {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .back-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 10px;
            font-family: 'Comic Neue', cursive;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .back-btn:hover {
            background: var(--secondary);
            transform: translateX(-3px);
        }
        
        .nav-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.3rem;
            color: var(--secondary);
        }
        
        .nav-right {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 5px 15px;
            border-radius: 8px;
            font-family: 'Comic Neue', cursive;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .nav-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .hero-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border-top: 5px solid var(--hard);
        }
        
        .hero-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .hero-title {
            flex: 1;
            min-width: 250px;
        }
        
        .day-badge {
            background: linear-gradient(135deg, var(--hard), #c72828);
            color: white;
            padding: 8px 20px;
            border-radius: 15px;
            font-family: 'Gochi Hand', cursive;
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        h1 {
            font-family: 'Gochi Hand', cursive;
            font-size: 2.8rem;
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .meta-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .difficulty-badge {
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            color: white;
            font-size: 1rem;
        }
        
        .tag {
            background: var(--light);
            padding: 5px 15px;
            border-radius: 15px;
            color: var(--secondary);
            font-size: 0.9rem;
        }
        
        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px dashed var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .key-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .key-point {
            background: linear-gradient(135deg, #ffe6e6, #ffd6d6);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--hard);
        }
        
        .key-point-title {
            font-weight: bold;
            color: var(--hard);
            margin-bottom: 5px;
        }
        
        .concept-card {
            background: linear-gradient(135deg, #fff0f0, #ffe6e6);
            border-left: 5px solid var(--hard);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .concept-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.4rem;
            color: var(--hard);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        pre {
            background: #282c34;
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
            margin: 15px 0;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
        }
        
        code {
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #f8f8f2;
        }
        
        .inline-code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Fira Code', monospace;
            color: var(--hard);
            font-size: 0.9em;
        }
        
        .navigation-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .nav-footer-btn {
            flex: 1;
            min-width: 200px;
            background: white;
            border: 3px solid var(--primary);
            padding: 20px;
            border-radius: 15px;
            text-decoration: none;
            color: var(--dark);
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .nav-footer-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .nav-footer-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .nav-footer-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.3rem;
        }        
        /* å‚è€ƒç­”æ¡ˆæ¨¡å—æ ·å¼ - æ¸©æš–æ²»æ„ˆé£æ ¼ */
        .answer-reference {
            position: relative;
            margin: 60px 0 30px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .envelope-container {
            position: relative;
            width: 340px;
            height: 240px;
            cursor: pointer;
            perspective: 1200px;
            margin-bottom: 20px;
            filter: drop-shadow(0 10px 20px rgba(139, 115, 85, 0.2));
        }
        
        .envelope {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .envelope-front, .envelope-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .envelope-front {
            background: linear-gradient(135deg, #f9f3e9, #e8dfd1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #d4c9b8;
        }
        
        .envelope-flap {
            position: absolute;
            top: -70px;
            width: 0;
            height: 0;
            border-left: 170px solid transparent;
            border-right: 170px solid transparent;
            border-bottom: 70px solid #e8dfd1;
            z-index: 1;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.1));
        }
        
        .envelope-flap::after {
            content: "";
            position: absolute;
            top: 3px;
            left: -170px;
            width: 0;
            height: 0;
            border-left: 170px solid transparent;
            border-right: 170px solid transparent;
            border-bottom: 67px solid #f9f3e9;
        }
        
        .envelope-seal {
            position: absolute;
            bottom: 25px;
            right: 35px;
            width: 70px;
            height: 70px;
            background: radial-gradient(circle at 30% 30%, #C44536, #8B2E24);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 2;
            border: 2px solid #A52A2A;
        }
        
        .seal-icon {
            color: #F5F1E6;
            font-size: 1.8rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .envelope-text {
            font-family: 'Reenie Beanie', cursive;
            font-size: 2.4rem;
            color: var(--warm-brown);
            z-index: 2;
            position: relative;
            margin-top: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            letter-spacing: 1px;
        }
        
        .envelope-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 15% 25%, rgba(139, 115, 85, 0.05) 3px, transparent 3px),
                radial-gradient(circle at 85% 75%, rgba(139, 115, 85, 0.05) 3px, transparent 3px);
            background-size: 40px 40px;
            z-index: 0;
        }
        
        .envelope-back {
            background: linear-gradient(135deg, #f5f1e6, #e8dfd1);
            transform: rotateY(180deg);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #d4c9b8;
        }
        
        .envelope-container:hover .envelope {
            transform: rotateY(10deg) translateY(-5px);
        }
        
        .envelope-container.open .envelope {
            transform: rotateY(180deg);
        }
        
        .envelope-hint {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.3rem;
            color: var(--warm-brown);
            margin-top: 15px;
            opacity: 0.9;
            background: rgba(245, 241, 230, 0.7);
            padding: 8px 20px;
            border-radius: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        /* å¼¹çª—æ ·å¼ */
        .answer-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2000;
            background: rgba(107, 142, 159, 0.7);
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(3px);
        }
        
        .letter-container {
            width: 90%;
            max-width: 900px;
            height: 80vh;
            background: #F5F1E6;
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(107, 142, 159, 0.4);
            overflow: hidden;
            transform: scale(0);
            transition: transform 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            position: relative;
            border: 1px solid #d4c9b8;
        }
        
        .answer-modal.open .letter-container {
            transform: scale(1);
        }
        
        .letter-header {
            background: linear-gradient(135deg, #8B7355, #6B5A45);
            padding: 25px 30px;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 10px;
            border-bottom: 2px dashed #A5947A;
        }
        
        .letter-title {
            font-family: 'Reenie Beanie', cursive;
            font-size: 3rem;
            color: #F5F1E6;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            letter-spacing: 2px;
        }
        
        .letter-subtitle {
            color: rgba(245, 241, 230, 0.9);
            font-size: 1.3rem;
            font-family: 'Gochi Hand', cursive;
        }
        
        .close-letter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(245, 241, 230, 0.2);
            color: #F5F1E6;
            border: 1px solid rgba(245, 241, 230, 0.3);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .close-letter:hover {
            background: rgba(245, 241, 230, 0.3);
            transform: rotate(90deg);
        }
        
        .letter-body {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #F5F1E6;
            position: relative;
        }
        
        .letter-body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background-image: 
                linear-gradient(90deg, transparent 98%, rgba(139, 115, 85, 0.1) 98%),
                linear-gradient(rgba(139, 115, 85, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
        }
        
        /* MDå†…å®¹æ ·å¼ */
        .md-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .md-section {
            margin-bottom: 40px;
        }
        
        .md-section h1 {
            font-family: 'Reenie Beanie', cursive;
            font-size: 3rem;
            color: var(--warm-brown);
            margin-bottom: 20px;
            border-bottom: 2px dashed #A5947A;
            padding-bottom: 10px;
            text-align: center;
        }
        
        .md-section h2 {
            font-family: 'Reenie Beanie', cursive;
            font-size: 2.2rem;
            color: var(--warm-brown);
            margin: 30px 0 15px 0;
            position: relative;
            padding-left: 25px;
        }
        
        .md-section h2::before {
            content: "â€¢";
            position: absolute;
            left: 0;
            top: 0;
            color: var(--warm-red);
            font-size: 2.5rem;
        }
        
        .md-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .md-tag {
            background: rgba(139, 115, 85, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            color: var(--warm-brown);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            border: 1px solid rgba(139, 115, 85, 0.2);
        }
        
        .md-highlight {
            background: rgba(107, 142, 159, 0.1);
            border-left: 5px solid var(--vintage-blue);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid rgba(107, 142, 159, 0.2);
        }
        
        .md-content pre {
            background: #2d2a2e;
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3), 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #3a363b;
        }
        
        .md-content code {
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #f8f8f2;
        }
        
        .md-content .inline-code {
            background: rgba(139, 115, 85, 0.1);
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            color: var(--warm-brown);
            font-size: 0.9em;
            border: 1px solid rgba(139, 115, 85, 0.2);
        }
        
        .md-content ul, .md-content ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }
        
        .md-content li {
            margin-bottom: 8px;
            line-height: 1.7;
        }
        
        .md-content blockquote {
            border-left: 4px solid var(--vintage-blue);
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: #666;
            background: rgba(107, 142, 159, 0.05);
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
        }
        
        .md-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(139, 115, 85, 0.2);
        }
        
        .md-content th, .md-content td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(139, 115, 85, 0.2);
        }
        
        .md-content th {
            background: linear-gradient(135deg, var(--warm-brown), #6B5A45);
            color: #F5F1E6;
            font-weight: bold;
            font-family: 'Gochi Hand', cursive;
            font-size: 1.1rem;
        }
        
        .md-content tr:nth-child(even) {
            background: rgba(139, 115, 85, 0.05);
        }
        
        .signature {
            text-align: right;
            margin-top: 40px;
            font-family: 'Reenie Beanie', cursive;
            font-size: 2rem;
            color: var(--warm-brown);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .hero-section {
                padding: 25px;
            }
            
            .section {
            padding: 20px;
            }
            
            .key-points {
                grid-template-columns: 1fr;
            }
            
            .envelope-container {
                width: 300px;
                height: 210px;
            }
            
            .envelope-flap {
                border-left: 150px solid transparent;
                border-right: 150px solid transparent;
                border-bottom: 60px solid #e8dfd1;
            }
            
            .envelope-flap::after {
                border-left: 150px solid transparent;
                border-right: 150px solid transparent;
                border-bottom: 57px solid #f9f3e9;
                left: -150px;
            }
            
            .envelope-text {
                font-size: 2rem;
            }
            
            .answer-modal {
                padding: 10px;
            }
            
            .letter-container {
                width: 95%;
                height: 85vh;
            }
            
            .letter-title {
                font-size: 2.2rem;
            }
            
            .md-section h1 {
                font-size: 2.2rem;
            }
            
            .md-section h2 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <div class="nav-left">
        <a href="index.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> è¿”å›é¦–é¡µ
        </a>
            <span class="nav-title">ç¬¬13å¤© - ä»£å¸é”€å”®ä¸é”å®š</span>
        </div>
        <div class="nav-right">
            <a href="#concepts" class="nav-btn">ğŸ“š æ ¸å¿ƒæ¦‚å¿µ</a>
            <a href="#code" class="nav-btn">ğŸ’» ä»£ç è®²è§£</a>
            <a href="#practice" class="nav-btn">ğŸ¯ å®è·µ</a>
        </div>
    </div>

    <div class="container">
        <div class="hero-section">
            <div class="hero-header">
                <div class="hero-title">
                    <div class="day-badge">ç¬¬ 13 å¤© ğŸ«</div>
            <h1>PreorderTokens - é¢„è´­ä»£å¸</h1>
                    <p class="subtitle">ä»£å¸é”€å”®åˆçº¦ - virtual/overrideä¸æ—¶é—´é”</p>
                </div>
                <div class="meta-tags">
                    <div class="difficulty-badge" style="background: var(--hard);">
                        ğŸŒ³ é«˜çº§
                    </div>
                    <span class="tag">virtual</span>
                    <span class="tag">override</span>
                    <span class="tag">æ—¶é—´é”</span>
                <span class="tag">ICO</span>
                </div>
            </div>
            
            <div class="key-points">
                <div class="key-point">
                    <div class="key-point-title">ğŸ“Œ å­¦ä¹ ç›®æ ‡</div>
                    <div>æŒæ¡å‡½æ•°é‡å†™å’Œä»£å¸é”€å”®æœºåˆ¶</div>
                </div>
                <div class="key-point">
                    <div class="key-point-title">ğŸ¯ æ ¸å¿ƒæŠ€èƒ½</div>
                    <div>virtual/overrideã€superã€æ—¶é—´æ§åˆ¶</div>
                </div>
                <div class="key-point">
                    <div class="key-point-title">â±ï¸ é¢„è®¡æ—¶é—´</div>
                    <div>90åˆ†é’Ÿ</div>
                </div>
                <div class="key-point">
                    <div class="key-point-title">ğŸ”¥ éš¾åº¦ç³»æ•°</div>
                    <div>â˜…â˜…â˜…â˜…â˜†</div>
                </div>
            </div>
        </div>

        <div class="section" id="concepts">
            <h2 class="section-title">
                <i class="fas fa-lightbulb"></i> æ ¸å¿ƒæ¦‚å¿µè¯¦è§£
            </h2>
            
            <div class="concept-card">
                <div class="concept-title">ğŸ”„ virtual å’Œ override</div>
                <p>å…è®¸å­åˆçº¦é‡å†™çˆ¶åˆçº¦çš„å‡½æ•°:</p>
                <pre><code class="language-solidity">// çˆ¶åˆçº¦
contract SimpleERC20 {
    function transfer(address _to, uint256 _value) 
        public 
        virtual  // æ ‡è®°ä¸ºå¯è¢«é‡å†™
        returns (bool) 
    {
        _transfer(msg.sender, _to, _value);
        return true;
    }
}

// å­åˆçº¦
contract TokenSale is SimpleERC20 {
    function transfer(address _to, uint256 _value) 
        public 
        override  // é‡å†™çˆ¶åˆçº¦å‡½æ•°
        returns (bool) 
    {
        // æ·»åŠ é¢å¤–é€»è¾‘
        require(finalized, "Tokens are locked");
        
        // è°ƒç”¨çˆ¶åˆçº¦çš„åŸå§‹å‡½æ•°
        return super.transfer(_to, _value);
    }
}</code></pre>
                <p><strong>å…³é”®ç‚¹:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li><code class="inline-code">virtual</code>: çˆ¶åˆçº¦æ ‡è®°å‡½æ•°å¯è¢«é‡å†™</li>
                    <li><code class="inline-code">override</code>: å­åˆçº¦æ ‡è®°æ­£åœ¨é‡å†™çˆ¶å‡½æ•°</li>
                    <li><code class="inline-code">super</code>: è°ƒç”¨çˆ¶åˆçº¦çš„å‡½æ•°</li>
                    <li>å‡½æ•°ç­¾åå¿…é¡»å®Œå…¨åŒ¹é…</li>
                </ul>
            </div>

            <div class="concept-card">
                <div class="concept-title">ğŸ”’ ä»£å¸é”å®šæœºåˆ¶</div>
                <p>åœ¨ä»£å¸é”€å”®æœŸé—´é˜²æ­¢è½¬è´¦,ä¿æŠ¤æŠ•èµ„è€…:</p>
                <pre><code class="language-solidity">bool public finalized = false;

function transfer(address _to, uint256 _value) public override returns (bool) {
    // å¦‚æœé”€å”®æœªå®Œæˆ,ç¦æ­¢è½¬è´¦
    if (!finalized && msg.sender != address(this)) {
        require(false, "Tokens are locked until sale is finalized");
    }
    return super.transfer(_to, _value);
}</code></pre>
                <p><strong>ä¸ºä»€ä¹ˆéœ€è¦é”å®š?</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li>é˜²æ­¢æ—©æœŸæŠ•èµ„è€…åœ¨é”€å”®æœŸé—´æŠ›å”®</li>
                    <li>ç¡®ä¿å…¬å¹³çš„ä»£å¸åˆ†é…</li>
                    <li>é¿å…ä»·æ ¼æ“çºµ</li>
                    <li>ä¿æŠ¤é¡¹ç›®æ–¹ç­¹é›†èµ„é‡‘</li>
                </ul>
                
                <div style="background: #fff9e6; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <strong style="color: #856404;">ğŸ’¡ ä¾‹å¤–:</strong>
                    <span style="color: #856404;"> åˆçº¦è‡ªå·±(<code class="inline-code">address(this)</code>)ä»ç„¶å¯ä»¥è½¬è´¦,è¿™æ ·æ‰èƒ½åœ¨è´­ä¹°æ—¶å°†ä»£å¸è½¬ç»™ä¹°å®¶!</span>
                </div>
            </div>

            <div class="concept-card">
                <div class="concept-title">â° æ—¶é—´æ§åˆ¶ - é”€å”®å‘¨æœŸ</div>
                <pre><code class="language-solidity">uint256 public saleStartTime;
uint256 public saleEndTime;

constructor(uint256 _startTime, uint256 _duration) {
    saleStartTime = _startTime;
    saleEndTime = _startTime + _duration;
}

function isSaleActive() public view returns (bool) {
    return block.timestamp >= saleStartTime && 
           block.timestamp <= saleEndTime && 
           !finalized;
}</code></pre>
                <p><strong>æ—¶é—´çº¿ç¤ºä¾‹:</strong></p>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                    <pre><code>éƒ¨ç½²æ—¶é—´: 2024-01-01 00:00:00
é”€å”®å¼€å§‹: 2024-01-10 00:00:00 (saleStartTime)
é”€å”®æŒç»­: 30å¤©
é”€å”®ç»“æŸ: 2024-02-09 00:00:00 (saleEndTime)

æ—¶é—´è½´:
|---- å‡†å¤‡æœŸ ----|---- é”€å”®æœŸ (30å¤©) ----|---- é”€å”®å ----|
éƒ¨ç½²            å¼€å§‹                     ç»“æŸ            å®Œæˆ</code></pre>
                </div>
            </div>

            <div class="concept-card">
                <div class="concept-title">ğŸ’° ä»£å¸ä»·æ ¼è®¡ç®—</div>
                <pre><code class="language-solidity">uint256 public tokenPrice = 0.001 ether;  // æ¯ä¸ªä»£å¸0.001 ETH

function buyTokens() public payable {
    // ç”¨æˆ·å‘é€1 ETH,èƒ½ä¹°å¤šå°‘ä»£å¸?
    uint256 tokenAmount = (msg.value * 10**decimals) / tokenPrice;
    
    // è®¡ç®—è¿‡ç¨‹:
    // msg.value = 1 ETH = 10^18 wei
    // decimals = 18
    // tokenAmount = (10^18 * 10^18) / (0.001 * 10^18)
    //             = 10^36 / 10^15
    //             = 10^21 æœ€å°å•ä½
    //             = 1000 tokens (10^21 / 10^18)
}</code></pre>
                
                <p style="margin-top: 15px;"><strong>å…¬å¼æ¨å¯¼:</strong></p>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                    <code>ä»£å¸æ•°é‡ = (æ”¯ä»˜çš„ETH Ã— 10^decimals) Ã· å•ä¸ªä»£å¸ä»·æ ¼</code><br><br>
                    <code>ä¾‹: 1 ETH Ã· 0.001 ETH/token = 1000 tokens</code>
                </div>
            </div>

            <div class="concept-card">
                <div class="concept-title">ğŸ“Š receive() - è‡ªåŠ¨è´­ä¹°</div>
                <pre><code class="language-solidity">receive() external payable {
    buyTokens();
}

// ç”¨æˆ·ç›´æ¥å‘åˆçº¦å‘é€ETH,è‡ªåŠ¨è§¦å‘è´­ä¹°
// ä¸éœ€è¦è°ƒç”¨å‡½æ•°!</code></pre>
                <p><strong>å·¥ä½œåŸç†:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li><code class="inline-code">receive()</code>åœ¨åˆçº¦æ”¶åˆ°çº¯ETHæ—¶è‡ªåŠ¨è°ƒç”¨</li>
                    <li>å¿…é¡»æ ‡è®°ä¸º<code class="inline-code">external payable</code></li>
                    <li>ä¸èƒ½æœ‰å‚æ•°,ä¸èƒ½è¿”å›å€¼</li>
                    <li>æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li>
                </ul>
            </div>
        </div>

        <div class="section" id="code">
            <h2 class="section-title">
                <i class="fas fa-code"></i> å®Œæ•´ä»£ç è¯¦è§£
            </h2>
            
            <h3 style="color: var(--secondary); margin: 20px 0;">ğŸ“„ æ­¥éª¤1: ä¿®æ”¹SimpleERC20ä¸ºvirtual</h3>
            <pre><code class="language-solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract SimpleERC20 {
    string public name = "SimpleToken";
    string public symbol = "SIM";
    uint8 public decimals = 18;
    uint256 public totalSupply;
    
    mapping(address => uint256) public balanceOf;
    mapping(address => mapping(address => uint256)) public allowance;
    
    event Transfer(address indexed from, address indexed to, uint256 value);
    event Approval(address indexed owner, address indexed spender, uint256 value);
    
    constructor(uint256 _initialSupply) {
        totalSupply = _initialSupply * (10 ** uint256(decimals));
        balanceOf[msg.sender] = totalSupply;
        emit Transfer(address(0), msg.sender, totalSupply);
    }
    
    function _transfer(address _from, address _to, uint256 _value) internal {
        require(balanceOf[_from] >= _value, "Insufficient balance");
        balanceOf[_from] -= _value;
        balanceOf[_to] += _value;
        emit Transfer(_from, _to, _value);
    }
    
    // âœ… æ·»åŠ virtualå…³é”®å­—
    function transfer(address _to, uint256 _value) public virtual returns (bool) {
        require(_to != address(0), "Invalid address");
        _transfer(msg.sender, _to, _value);
        return true;
    }
    
    function approve(address _spender, uint256 _value) public returns (bool) {
        require(_spender != address(0), "Invalid address");
        allowance[msg.sender][_spender] = _value;
        emit Approval(msg.sender, _spender, _value);
        return true;
    }
    
    // âœ… æ·»åŠ virtualå…³é”®å­—
    function transferFrom(address _from, address _to, uint256 _value) public virtual returns (bool) {
        require(_to != address(0), "Invalid address");
        require(_value <= allowance[_from][msg.sender], "Allowance exceeded");
        allowance[_from][msg.sender] -= _value;
        _transfer(_from, _to, _value);
        return true;
    }
}</code></pre>

            <h3 style="color: var(--secondary); margin: 30px 0 20px 0;">ğŸ“„ æ­¥éª¤2: TokenSaleåˆçº¦(ç»§æ‰¿å¹¶é‡å†™)</h3>
            <pre><code class="language-solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "./SimpleERC20.sol";

contract SimplifiedTokenSale is SimpleERC20 {
    uint256 public tokenPrice;
    uint256 public saleStartTime;
    uint256 public saleEndTime;
    uint256 public minPurchase;
    uint256 public maxPurchase;
    uint256 public totalRaised;
    address public projectOwner;
    bool public finalized = false;
    bool private initialTransferDone = false;
    
    event TokensPurchased(address indexed buyer, uint256 etherAmount, uint256 tokenAmount);
    event SaleFinalized(uint256 totalRaised, uint256 totalTokensSold);
    
    constructor(
        uint256 _initialSupply,
        uint256 _tokenPrice,
        uint256 _saleStartTime,
        uint256 _saleDuration,
        uint256 _minPurchase,
        uint256 _maxPurchase
    ) SimpleERC20(_initialSupply) {
        tokenPrice = _tokenPrice;
        saleStartTime = _saleStartTime;
        saleEndTime = _saleStartTime + _saleDuration;
        minPurchase = _minPurchase;
        maxPurchase = _maxPurchase;
        projectOwner = msg.sender;
        
        // å°†æ‰€æœ‰ä»£å¸è½¬åˆ°åˆçº¦
        _transfer(msg.sender, address(this), totalSupply);
        initialTransferDone = true;
    }
    
    // æ£€æŸ¥é”€å”®æ˜¯å¦æ¿€æ´»
    function isSaleActive() public view returns (bool) {
        return block.timestamp >= saleStartTime && 
               block.timestamp <= saleEndTime && 
               !finalized;
    }
    
    // è´­ä¹°ä»£å¸
    function buyTokens() public payable {
        require(isSaleActive(), "Sale not active");
        require(msg.value >= minPurchase && msg.value <= maxPurchase, "Invalid purchase amount");
        
        uint256 tokenAmount = (msg.value * 10**uint256(decimals)) / tokenPrice;
        require(balanceOf[address(this)] >= tokenAmount, "Insufficient tokens");
        
        _transfer(address(this), msg.sender, tokenAmount);
        totalRaised += msg.value;
        
        emit TokensPurchased(msg.sender, msg.value, tokenAmount);
    }
    
    // âœ… é‡å†™transfer - æ·»åŠ é”å®šé€»è¾‘
    function transfer(address _to, uint256 _value) public override returns (bool) {
        if (!finalized && msg.sender != address(this) && initialTransferDone) {
            require(false, "Tokens are locked until sale is finalized");
        }
        return super.transfer(_to, _value);
    }
    
    // âœ… é‡å†™transferFrom - æ·»åŠ é”å®šé€»è¾‘
    function transferFrom(address _from, address _to, uint256 _value) public override returns (bool) {
        if (!finalized && _from != address(this) && initialTransferDone) {
            require(false, "Tokens are locked until sale is finalized");
        }
        return super.transferFrom(_from, _to, _value);
    }
    
    // å®Œæˆé”€å”®
    function finalizeSale() public payable {
        require(msg.sender == projectOwner, "Only owner");
        require(block.timestamp > saleEndTime, "Sale not ended");
        require(!finalized, "Already finalized");
        
        finalized = true;
        
        // å°†ç­¹é›†çš„ETHè½¬ç»™é¡¹ç›®æ–¹
        (bool success, ) = projectOwner.call{value: address(this).balance}("");
        require(success, "Transfer failed");
        
        emit SaleFinalized(totalRaised, totalSupply - balanceOf[address(this)]);
    }
    
    // å·¥å…·å‡½æ•°
    function timeRemaining() public view returns (uint256) {
        if (block.timestamp >= saleEndTime) return 0;
        return saleEndTime - block.timestamp;
    }
    
    function tokensAvailable() public view returns (uint256) {
        return balanceOf[address(this)];
    }
    
    // æ¥æ”¶ç›´æ¥å‘é€çš„ETH
    receive() external payable {
        buyTokens();
    }
}</code></pre>

            <div style="background: linear-gradient(135deg, #d4edda, #c3e6cb); border-left: 5px solid #28a745; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <strong style="color: #155724;">âœ… åˆçº¦åŠŸèƒ½</strong>
                <p style="margin-top: 10px; color: #155724;">è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä»£å¸é”€å”®(ICO)åˆçº¦ã€‚é¡¹ç›®æ–¹å¯ä»¥è®¾ç½®ä»£å¸ä»·æ ¼ã€é”€å”®æ—¶é—´ã€è´­ä¹°é™é¢ã€‚æŠ•èµ„è€…åœ¨é”€å”®æœŸé—´è´­ä¹°ä»£å¸,ä½†ä»£å¸è¢«é”å®šã€‚é”€å”®ç»“æŸå,é¡¹ç›®æ–¹å®Œæˆé”€å”®,ä»£å¸è§£é”,æŠ•èµ„è€…å¯ä»¥è‡ªç”±è½¬è´¦ã€‚</p>
            </div>

            <h3 style="color: var(--secondary); margin: 30px 0 20px 0;">ğŸ” å…³é”®ä»£ç è§£æ</h3>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">1. æ„é€ å‡½æ•°æ‰§è¡Œæµç¨‹</h4>
                <pre><code class="language-solidity">constructor(...) SimpleERC20(_initialSupply) {
    // 1. å…ˆæ‰§è¡Œçˆ¶åˆçº¦æ„é€ å‡½æ•°
    //    - é“¸é€ æ‰€æœ‰ä»£å¸ç»™msg.sender
    //    - balanceOf[deployer] = totalSupply
    
    // 2. è®¾ç½®é”€å”®å‚æ•°
    tokenPrice = _tokenPrice;
    saleStartTime = _saleStartTime;
    saleEndTime = _saleStartTime + _saleDuration;
    // ...
    
    // 3. å°†æ‰€æœ‰ä»£å¸ä»deployerè½¬åˆ°åˆçº¦
    _transfer(msg.sender, address(this), totalSupply);
    // balanceOf[deployer] = 0
    // balanceOf[this contract] = totalSupply
    
    // 4. æ ‡è®°åˆå§‹è½¬è´¦å®Œæˆ
    initialTransferDone = true;
}</code></pre>
            </div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">2. è´­ä¹°æµç¨‹è¯¦è§£</h4>
                <pre><code class="language-solidity">// åœºæ™¯: Aliceç”¨1 ETHè´­ä¹°ä»£å¸
// tokenPrice = 0.001 ETH

buyTokens{value: 1 ether}();

// æ­¥éª¤1: æ£€æŸ¥é”€å”®æ¿€æ´»
require(isSaleActive());  âœ…

// æ­¥éª¤2: æ£€æŸ¥è´­ä¹°é‡‘é¢
require(1 ether >= minPurchase && 1 ether <= maxPurchase);  âœ…

// æ­¥éª¤3: è®¡ç®—ä»£å¸æ•°é‡
tokenAmount = (1 ether * 10^18) / 0.001 ether
            = (10^18 * 10^18) / (10^15)
            = 10^21 æœ€å°å•ä½
            = 1000 tokens

// æ­¥éª¤4: æ£€æŸ¥åˆçº¦ä½™é¢
require(balanceOf[contract] >= 1000 tokens);  âœ…

// æ­¥éª¤5: è½¬è´¦(åˆçº¦å¯ä»¥è½¬,å› ä¸ºmsg.sender == address(this))
_transfer(address(this), Alice, 1000 tokens);

// æ­¥éª¤6: è®°å½•
totalRaised += 1 ether;

// æ­¥éª¤7: è§¦å‘äº‹ä»¶
emit TokensPurchased(Alice, 1 ether, 1000 tokens);</code></pre>
            </div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">3. é”å®šæœºåˆ¶è¯¦è§£</h4>
                <pre><code class="language-solidity">// åœºæ™¯1: Aliceè¯•å›¾åœ¨é”€å”®æœŸé—´è½¬è´¦
Aliceè°ƒç”¨: token.transfer(Bob, 100);

æ‰§è¡Œ:
  finalized = false  âœ…
  msg.sender = Alice (ä¸æ˜¯address(this))  âœ…
  initialTransferDone = true  âœ…
  
  require(false, "Tokens are locked");  âŒ å¤±è´¥!

// åœºæ™¯2: åˆçº¦åœ¨è´­ä¹°æ—¶è½¬è´¦ç»™Alice
Contractè°ƒç”¨: _transfer(address(this), Alice, 100);

æ‰§è¡Œ:
  å†…éƒ¨é€šè¿‡super.transfer()è°ƒç”¨
  ä½†msg.senderåœ¨_transferå†…éƒ¨çš„ä¸Šä¸‹æ–‡ä¸åŒ
  å®é™…ä¸Šç›´æ¥ä¿®æ”¹balanceOf,ä¸è§¦å‘é”å®šæ£€æŸ¥  âœ…

// åœºæ™¯3: é”€å”®å®ŒæˆåAliceè½¬è´¦
finalizeSale();  // finalized = true

Aliceè°ƒç”¨: token.transfer(Bob, 100);

æ‰§è¡Œ:
  finalized = true  âœ…
  ifæ¡ä»¶ä¸æ»¡è¶³,ç›´æ¥æ‰§è¡Œsuper.transfer()  âœ…</code></pre>
            </div>
        </div>

        <div class="section" id="practice">
            <h2 class="section-title">
                <i class="fas fa-dumbbell"></i> å®è·µä¸ç»ƒä¹ 
            </h2>
            
            <h3 style="color: var(--secondary); margin-bottom: 20px;">ğŸ“ Remixå®æˆ˜æ­¥éª¤</h3>
            
            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">æ­¥éª¤1: éƒ¨ç½²ä»£å¸é”€å”®</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶:<code class="inline-code">SimpleERC20.sol</code>å’Œ<code class="inline-code">TokenSale.sol</code></li>
                    <li>ç¼–è¯‘TokenSaleåˆçº¦</li>
                    <li>éƒ¨ç½²å‚æ•°ç¤ºä¾‹:
                        <ul style="margin-left: 20px;">
                            <li>_initialSupply: <code class="inline-code">1000000</code> (100ä¸‡ä»£å¸)</li>
                            <li>_tokenPrice: <code class="inline-code">1000000000000000</code> (0.001 ETH)</li>
                            <li>_saleStartTime: <code class="inline-code">(å½“å‰æ—¶é—´æˆ³)</code></li>
                            <li>_saleDuration: <code class="inline-code">2592000</code> (30å¤©)</li>
                            <li>_minPurchase: <code class="inline-code">10000000000000000</code> (0.01 ETH)</li>
                            <li>_maxPurchase: <code class="inline-code">10000000000000000000</code> (10 ETH)</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">æ­¥éª¤2: æ£€æŸ¥åˆå§‹çŠ¶æ€</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>è°ƒç”¨<code class="inline-code">balanceOf(åˆçº¦åœ°å€)</code> - åº”è¯¥ç­‰äºtotalSupply</li>
                    <li>è°ƒç”¨<code class="inline-code">tokensAvailable()</code> - æŸ¥çœ‹å¯å”®ä»£å¸</li>
                    <li>è°ƒç”¨<code class="inline-code">isSaleActive()</code> - åº”è¯¥è¿”å›true</li>
                    <li>è°ƒç”¨<code class="inline-code">timeRemaining()</code> - æŸ¥çœ‹å‰©ä½™æ—¶é—´</li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">æ­¥éª¤3: è´­ä¹°ä»£å¸</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè´¦æˆ·(æŠ•èµ„è€…)</li>
                    <li>åœ¨VALUEè¾“å…¥æ¡†è¾“å…¥0.1,é€‰æ‹©Ether</li>
                    <li>è°ƒç”¨<code class="inline-code">buyTokens</code></li>
                    <li>æŸ¥çœ‹äº‹ä»¶<code class="inline-code">TokensPurchased</code></li>
                    <li>è°ƒç”¨<code class="inline-code">balanceOf(æŠ•èµ„è€…åœ°å€)</code> - åº”è¯¥æœ‰100ä¸ªä»£å¸</li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">æ­¥éª¤4: æµ‹è¯•é”å®š</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>æŠ•èµ„è€…å°è¯•è½¬è´¦:<code class="inline-code">transfer(å¦ä¸€ä¸ªåœ°å€, 10)</code></li>
                    <li>åº”è¯¥å¤±è´¥,é”™è¯¯ä¿¡æ¯:"Tokens are locked until sale is finalized"</li>
                    <li>éªŒè¯ä»£å¸ç¡®å®è¢«é”å®š</li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">æ­¥éª¤5: å®Œæˆé”€å”®(æ¨¡æ‹Ÿ)</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>åœ¨Remixä¸­ä¿®æ”¹<code class="inline-code">saleEndTime</code>ä¸ºè¿‡å»çš„æ—¶é—´(æµ‹è¯•ç”¨)</li>
                    <li>æˆ–è€…ç­‰å¾…å®é™…é”€å”®æœŸç»“æŸ</li>
                    <li>åˆ‡æ¢å›é¡¹ç›®æ–¹è´¦æˆ·</li>
                    <li>è°ƒç”¨<code class="inline-code">finalizeSale()</code></li>
                    <li>æŸ¥çœ‹äº‹ä»¶<code class="inline-code">SaleFinalized</code></li>
                    <li>éªŒè¯<code class="inline-code">finalized() == true</code></li>
                </ol>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--primary); margin-bottom: 15px; font-size: 1.2rem;">æ­¥éª¤6: éªŒè¯è§£é”</h4>
                <ol style="margin: 10px 0 10px 25px; line-height: 2;">
                    <li>åˆ‡æ¢å›æŠ•èµ„è€…è´¦æˆ·</li>
                    <li>å†æ¬¡è°ƒç”¨<code class="inline-code">transfer(å¦ä¸€ä¸ªåœ°å€, 10)</code></li>
                    <li>è¿™æ¬¡åº”è¯¥æˆåŠŸ!</li>
                    <li>éªŒè¯ä»£å¸å·²è§£é”,å¯ä»¥è‡ªç”±è½¬è´¦</li>
                </ol>
            </div>

            <h3 style="color: var(--secondary); margin: 40px 0 20px 0;">ğŸ¯ æŒ‘æˆ˜ç»ƒä¹ </h3>
            <div style="background: linear-gradient(135deg, #fff9e6, #ffedd5); border-left: 5px solid var(--medium); padding: 25px; border-radius: 10px;">
                <p style="font-weight: bold; margin-bottom: 15px; font-size: 1.1rem;">å°è¯•ä»¥ä¸‹æ”¹è¿›:</p>
                <ol style="margin-left: 25px; line-height: 2.2;">
                    <li>æ·»åŠ ç™½åå•åŠŸèƒ½(åªæœ‰ç™½åå•åœ°å€å¯ä»¥è´­ä¹°)</li>
                    <li>å®ç°åˆ†é˜¶æ®µé”€å”®(æ—©é¸Ÿä»·ã€æ­£å¸¸ä»·ã€æœ€åå†²åˆºä»·)</li>
                    <li>æ·»åŠ è½¯ä¸Šé™å’Œç¡¬ä¸Šé™</li>
                    <li>å®ç°é€€æ¬¾åŠŸèƒ½(å¦‚æœæ²¡è¾¾åˆ°è½¯ä¸Šé™)</li>
                    <li>æ·»åŠ æ¨èå¥–åŠ±(æ¨èäººè·å¾—é¢å¤–ä»£å¸)</li>
                    <li>å®ç°æ¸è¿›å¼è§£é”(25%ç«‹å³è§£é”,å‰©ä½™åˆ†3ä¸ªæœˆ)</li>
                    <li>æ·»åŠ ç´§æ€¥æš‚åœåŠŸèƒ½</li>
                </ol>
            </div>

            <h3 style="color: var(--secondary); margin: 40px 0 20px 0;">ğŸ“š æ·±å…¥ç†è§£</h3>
            
            <div style="background: white; border: 2px solid var(--accent); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: var(--primary); margin-bottom: 10px;">virtualã€overrideå’Œsuper</h4>
                <pre><code class="language-solidity">contract A {
    function foo() public virtual returns (string memory) {
        return "A";
    }
}

contract B is A {
    function foo() public override returns (string memory) {
        return "B";
    }
}

contract C is B {
    function foo() public override returns (string memory) {
        string memory parent = super.foo();  // è°ƒç”¨Bçš„foo
        return string.concat(parent, "+C");  // "B+C"
    }
}</code></pre>
            </div>

            <div style="background: white; border: 2px solid var(--accent); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: var(--primary); margin-bottom: 10px;">çœŸå®ä¸–ç•Œçš„ä»£å¸é”€å”®</h4>
                <p>ç°ä»£ICO/IDOé€šå¸¸åŒ…æ‹¬:</p>
                <ul style="margin: 10px 0 0 20px; line-height: 1.8;">
                    <li><strong>KYC/AML</strong>: èº«ä»½éªŒè¯</li>
                    <li><strong>Vesting</strong>: é”ä»“æœŸå’Œé‡Šæ”¾è®¡åˆ’</li>
                    <li><strong>Cliff</strong>: æ‚¬å´–æœŸ(ä¸€æ®µæ—¶é—´åæ‰å¼€å§‹é‡Šæ”¾)</li>
                    <li><strong>Cap</strong>: ä¸ªäººä¸Šé™å’Œæ€»ä¸Šé™</li>
                    <li><strong>Whitelist</strong>: ç™½åå•/ä¼˜å…ˆè´­ä¹°</li>
                    <li><strong>Refund</strong>: æœªè¾¾ç›®æ ‡é€€æ¬¾</li>
</ul>
            </div>

            <div style="background: white; border: 2px solid var(--accent); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: var(--primary); margin-bottom: 10px;">receive() vs fallback()</h4>
                <pre><code class="language-solidity">// receive: æ¥æ”¶çº¯ETH(æ— data)
receive() external payable {
    buyTokens();
}

// fallback: æ¥æ”¶ETH+data æˆ– è°ƒç”¨ä¸å­˜åœ¨çš„å‡½æ•°
fallback() external payable {
    // å¤„ç†å…¶ä»–æƒ…å†µ
}

// è°ƒç”¨ä¼˜å…ˆçº§:
// 1. å¦‚æœmsg.dataä¸ºç©º -> receive()
// 2. å¦‚æœreceive()ä¸å­˜åœ¨æˆ–msg.dataä¸ä¸ºç©º -> fallback()</code></pre>
            </div>
        </div>

        <div class="navigation-footer">
            <a href="contract-12.html" class="nav-footer-btn" style="border-color: var(--accent);">
                <div class="nav-footer-label">â† ä¸Šä¸€ä¸ª</div>
                <div class="nav-footer-title">MyFirstTokené¦–ä»£å¸</div>
            </a>
            <a href="contract-14.html" class="nav-footer-btn" style="border-color: var(--accent);">
                <div class="nav-footer-label">ä¸‹ä¸€ä¸ª â†’</div>
                <div class="nav-footer-title">SafeDeposit å®‰å…¨ä¿ç®¡ç®±</div>
            </a>
        </div>
    
        <!-- Snehaçš„ä¸€å°æ¥ä¿¡æ¨¡å— -->
        <div class="answer-reference">
            <div class="envelope-container" id="envelope-container">
                <div class="envelope">
                    <div class="envelope-front">
                        <div class="envelope-flap"></div>
                        <div class="envelope-pattern"></div>
                        <div class="envelope-seal">
                            <i class="fas fa-feather-alt seal-icon"></i>
                        </div>
                        <div class="envelope-text">Snehaçš„ä¸€å°æ¥ä¿¡</div>
                    </div>
                    <div class="envelope-back">
                        <div class="envelope-text" style="color: var(--warm-brown);">ç‚¹å‡»å¼€å¯</div>
                    </div>
                </div>
            </div>
            <div class="envelope-hint">ç‚¹å‡»ä¿¡å°æŸ¥çœ‹Snehaçš„æ¥ä¿¡</div>
        </div>
    </div>

    <!-- å¼¹çª— - å†…å®¹å¾…åç»­ç²¾ç»†åŒ–å¤„ç† -->
    <div class="answer-modal" id="answer-modal">
        <div class="letter-container">
            <div class="letter-header">
                <div class="letter-title">Snehaçš„ä¸€å°æ¥ä¿¡</div>
                <div class="letter-subtitle">å…³äºç¬¬13å¤©çš„å­¦ä¹ æŒ‡å¯¼</div>
                <button id="close-letter" class="close-letter">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="letter-body">
                <div id="md-content" class="md-content">
                    <div class="md-section">
                        <h1>é¢„å”®åŠŸèƒ½è®¾ç½®</h1>
                        <div class="md-meta">
                            <span class="md-tag"><i class="fas fa-calendar-day"></i> Day 13</span>
                            <span class="md-tag"><i class="fas fa-hashtag"></i> ID: 13</span>
                            <span class="md-tag"><i class="fas fa-user-edit"></i> è¯‘è€…: He Shadow</span>
                            <span class="md-tag"><i class="fas fa-signal"></i> éš¾åº¦ç­‰çº§: ä¸­çº§</span>
                        </div>
                        
                        <h2>é¢„è´­ä»£å¸</h2>
                        
                        <p>å¥½çš„â€”â€”ç°åœ¨æˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªæœ‰æ•ˆçš„ ERC-20 ä»£å¸åˆçº¦ï¼Œæ˜¯æ—¶å€™å‡çº§äº†ã€‚å‡è®¾ä½ æƒ³<strong>åœ¨é¡¹ç›®æ­£å¼å¯åŠ¨å‰å‘å”®ä½ çš„ä»£å¸</strong>ã€‚ä¹Ÿè®¸ä½ æƒ³ç­¹é›†ä¸€äº› ETHï¼Œå¥–åŠ±æ—©æœŸä¿¡å¾’ï¼Œæˆ–è€…åˆ¶é€ çƒ­åº¦ã€‚è¿™æ­£æ˜¯è®¸å¤šç°å®ä¸–ç•ŒåŠ å¯†é¡¹ç›®æ‰€åšçš„äº‹æƒ…â€”â€”ä»–ä»¬è¿›è¡Œ<strong>ä»£å¸å‘å”®</strong>ï¼ˆä¹Ÿç§°ä¸ºé¢„å”®æˆ– ICOï¼‰ï¼Œç”¨æˆ·ä»¥å›ºå®šæ±‡ç‡å‘é€ ETH å¹¶è·å¾—ä»£å¸ä½œä¸ºå›æŠ¥ã€‚</p>
                        
                        <p>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ª<strong>ç®€å•çš„ä»£å¸å‘å”®åˆçº¦</strong>ï¼Œå®ƒç›´æ¥å»ºç«‹åœ¨æˆ‘ä»¬åˆšåˆšç¼–å†™çš„ ERC-20 ä»£å¸ä¸Šã€‚ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä»£å¸åˆçº¦è¿›è¡Œä¸€é¡¹é‡è¦çš„æ›´æ”¹ï¼Œä»¥ä¾¿å…¶èƒ½å¤Ÿæ­£ç¡®æ‰©å±•ã€‚</p>
                        
                        <h2>æˆ‘ä»¬è¦æ„å»ºä»€ä¹ˆ</h2>
                        
                        <p>æˆ‘ä»¬å³å°†æ„å»ºä¸€ä¸ª<strong>ç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„ä»£å¸å‘å”®åˆçº¦</strong>â€”â€”æ‚¨å¯ä»¥åœ¨é¢„å”®ã€æ—©æœŸæ”¯æŒè€…è½®æ¬¡æˆ–å‘å¸ƒæ´»åŠ¨ä¸­ä½¿ç”¨å®ƒã€‚è¯¥åˆçº¦å°†å…è®¸ä½ ï¼š</p>
                        <ul>
                            <li>ä»¥å›ºå®šçš„ ETH ä»·æ ¼å‘å”®ä½ çš„è‡ªå®šä¹‰ ERC-20 ä»£å¸</li>
                            <li>è®¾ç½®å‘å”®çš„å¼€å§‹å’Œç»“æŸæ—¶é—´</li>
                            <li>å¼ºåˆ¶æ‰§è¡Œæœ€ä½å’Œæœ€é«˜è´­ä¹°é‡‘é¢</li>
                            <li>è‡ªåŠ¨å¤„ç†ä»£å¸åˆ†å‘</li>
                            <li>é˜²æ­¢å‘å”®æœŸé—´çš„è½¬è´¦ï¼ˆä»¥é˜²æ­¢çŸ­çº¿æŠ›å”®æˆ–æœºå™¨äººç ¸ç›˜ï¼‰</li>
                            <li>å®Œæˆå‘å”®å¹¶å°†ç­¹é›†çš„ ETH è½¬ç§»ç»™é¡¹ç›®æ‰€æœ‰è€…</li>
                        </ul>
                        
                        <p>å› æ­¤æµç¨‹å°†å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
                        <ol>
                            <li>ä½ ï¼ˆé¡¹ç›®æ–¹ï¼‰éƒ¨ç½²ä»£å¸å‘å”®åˆçº¦</li>
                            <li>å®ƒï¼ˆä»£å¸å‘å”®åˆçº¦ï¼‰åˆ›å»ºå¹¶æŒæœ‰æ‰€æœ‰ä»£å¸</li>
                            <li>ä¹°å®¶å‘é€ ETH å¹¶è·å–ä»£å¸ä½œä¸ºå›æŠ¥</li>
                            <li>åœ¨å‘å”®æœŸé—´ï¼Œè½¬è´¦åŠŸèƒ½è¢«<strong>é”å®š</strong></li>
                            <li>å‘å”®ç»“æŸåï¼Œä½ ï¼ˆé¡¹ç›®æ–¹ï¼‰å®Œæˆäº¤æ˜“å¹¶é¢†å– ETH</li>
                        </ol>
                        
                        <p>å¾ˆç®€æ´ï¼Œå¯¹å§ï¼Ÿä¸ºäº†ä½¿è¿™ä¸€åˆ‡æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡å¥½ä»£å¸ä»¥æ”¯æŒç»§æ‰¿ï¼Œå¹¶é‡å†™ä¸€äº›å…³é”®å‡½æ•°ã€‚æˆ‘ä»¬å…ˆå¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
                        
                        <h2>å°†ä»£å¸å‡½æ•°æ ‡è®°ä¸ºå¯é‡å†™</h2>
                        
                        <p>åœ¨æ·±å…¥è®²è§£ä»£å¸å‘å”®åˆçº¦ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¹åŸæ¥çš„ <code class="inline-code">SimpleERC20</code> åˆçº¦åšä¸€äº›å°è°ƒæ•´ã€‚åœ¨ Solidity ç¼–ç¨‹è¯­è¨€é‡Œï¼Œå¦‚æœä½ æƒ³åœ¨"å­åˆçº¦"é‡Œ<strong>é‡å†™</strong>ï¼ˆé‡æ–°å®ç°ï¼‰"çˆ¶åˆçº¦"é‡Œçš„æŸä¸ªå‡½æ•°ï¼Œé‚£çˆ¶åˆçº¦é‡Œçš„è¿™ä¸ªå‡½æ•°å¿…é¡»åŠ ä¸Š <code class="inline-code">virtual</code> çš„æ ‡è®°ã€‚</p>
                        
                        <p>æ‰€ä»¥åœ¨ä½ çš„ <code class="inline-code">SimpleERC20</code> åˆçº¦é‡Œï¼Œéœ€è¦åƒä¸‹é¢è¿™æ ·æŠŠä¸¤ä¸ªå‡½æ•°åŠ ä¸Š virtual æ ‡è®°ï¼š</p>
                        
                        <pre><code class="language-solidity">function transfer(address _to, uint256 _value) public virtual returns (bool);
function transferFrom(address _from, address _to, uint256 _value) public virtual returns (bool);</code></pre>
                        
                        <p>è¿™ä¸€å˜åŒ–ï¼ˆæŒ‡åŠ  virtualï¼‰ä¼šå‘Šè¯‰ Solidityï¼š"æ³¨æ„ï¼Œå¦‚æœæœ‰å…¶ä»–åˆçº¦ç»§æ‰¿äº†è¿™ä¸ªåˆçº¦ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯ä»¥è¢«é‡æ–°ä¿®æ”¹çš„ã€‚"æˆ‘ä»¬ä¼šåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨ä»£å¸å‘å”®æœŸé—´é™åˆ¶ä»£å¸çš„è½¬è´¦ã€‚</p>
                        
                        <h2>åˆçº¦ç»“æ„è§£æï¼šSimplifiedTokenSale</h2>
                        
                        <pre><code class="language-solidity">contract SimplifiedTokenSale is SimpleERC20 {</code></pre>
                        
                        <p>è¿™ä¸ªåˆçº¦ç»§æ‰¿è‡ª <code class="inline-code">SimpleERC20</code>ï¼Œå› æ­¤å®ƒæ‹¥æœ‰æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„æ‰€æœ‰ ERC-20 åŠŸèƒ½â€”â€”è¿˜å¯ä»¥åŠ ä¸Šæˆ‘ä»¬æ¥ä¸‹æ¥è¦å†™çš„æ–°åŠŸèƒ½ã€‚</p>
                        
                        <h2>çŠ¶æ€å˜é‡ â€” å‘å”®è®¾ç½®</h2>
                        
                        <pre><code class="language-solidity">uint256 public tokenPrice;
uint256 public saleStartTime;
uint256 public saleEndTime;
uint256 public minPurchase;
uint256 public maxPurchase;
uint256 public totalRaised;
address public projectOwner;
bool public finalized = false;
bool private initialTransferDone = false;</code></pre>
                        
                        <div class="md-highlight">
                            <p>æˆ‘ä»¬é€æ¡è§£é‡Šä¸€ä¸‹ï¼š</p>
                            <ul>
                                <li><code class="inline-code">tokenPrice</code>ï¼šæ¯ä¸ªä»£å¸å€¼å¤šå°‘ ETHï¼ˆå•ä½æ˜¯ weiï¼Œ1 ETH = 10Â¹â¸ weiï¼‰</li>
                                <li><code class="inline-code">saleStartTime</code> å’Œ <code class="inline-code">saleEndTime</code>ï¼šè¡¨ç¤ºå‘å”®å¼€å§‹å’Œç»“æŸæ—¶é—´çš„æ—¶é—´æˆ³</li>
                                <li><code class="inline-code">minPurchase</code> å’Œ <code class="inline-code">maxPurchase</code>ï¼šå•ç¬”äº¤æ˜“ä¸­å…è®¸è´­ä¹°çš„æœ€å°å’Œæœ€å¤§ ETH é¢åº¦</li>
                                <li><code class="inline-code">totalRaised</code>ï¼šç›®å‰ä¸ºæ­¢æ¥æ”¶çš„ ETH æ€»é¢</li>
                                <li><code class="inline-code">projectOwner</code>ï¼šå‘å”®ç»“æŸåæ¥æ”¶ ETH çš„é’±åŒ…åœ°å€</li>
                                <li><code class="inline-code">finalized</code>ï¼šå‘å”®æ˜¯å¦å·²ç»æ­£å¼å…³é—­</li>
                                <li><code class="inline-code">initialTransferDone</code>ï¼šç”¨äºç¡®ä¿åˆçº¦åœ¨é”å®šè½¬è´¦å‰å·²æ”¶åˆ°æ‰€æœ‰ä»£å¸</li>
                            </ul>
                            <p>è¿™äº›å˜é‡æ˜¯æ•´ä¸ªå‘å”®é€»è¾‘çš„åŸºç¡€ã€‚</p>
                        </div>
                        
                        <h2>äº‹ä»¶</h2>
                        
                        <pre><code class="language-solidity">event TokensPurchased(address indexed buyer, uint256 etherAmount, uint256 tokenAmount);
event SaleFinalized(uint256 totalRaised, uint256 totalTokensSold);</code></pre>
                        
                        <ul>
                            <li><code class="inline-code">TokensPurchased</code>ï¼šå½“æœ‰äººæˆåŠŸè´­ä¹°ä»£å¸æ—¶è§¦å‘ã€‚å®ƒä¼šè®°å½•è´­ä¹°è€…ã€æ”¯ä»˜çš„ ETH æ•°é‡ä»¥åŠæ”¶åˆ°çš„ä»£å¸æ•°é‡ã€‚</li>
                            <li><code class="inline-code">SaleFinalized</code>ï¼šå‘å”®ç»“æŸæ—¶è§¦å‘ã€‚è®°å½•ç­¹é›†çš„ ETH æ€»æ•°å’Œå”®å‡ºçš„ä»£å¸æ•°é‡ã€‚</li>
                        </ul>
                        
                        <p>è¿™äº›äº‹ä»¶å¯¹å‰ç«¯é¡µé¢å’ŒåŒºå—é“¾æµè§ˆå™¨æ¥è¯´å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥ç”¨æ¥å±•ç¤ºå‘å”®çš„å®æ—¶åŠ¨æ€ã€‚</p>
                        
                        <h2>æ„é€ å‡½æ•° â€” è®¾ç½®ä¸€åˆ‡</h2>
                        
                        <pre><code class="language-solidity">constructor(
    uint256 _initialSupply,
    uint256 _tokenPrice,
    uint256 _saleDurationInSeconds,
    uint256 _minPurchase,
    uint256 _maxPurchase,
    address _projectOwner
) SimpleERC20(_initialSupply) {
    tokenPrice = _tokenPrice;
    saleStartTime = block.timestamp;
    saleEndTime = block.timestamp + _saleDurationInSeconds;
    minPurchase = _minPurchase;
    maxPurchase = _maxPurchase;
    projectOwner = _projectOwner;

    // å°†æ‰€æœ‰ä»£å¸è½¬ç§»è‡³æ­¤åˆçº¦ç”¨äºå‘å”®
    _transfer(msg.sender, address(this), totalSupply);

    // æ ‡è®°æˆ‘ä»¬å·²ç»ä»éƒ¨ç½²è€…é‚£é‡Œè½¬ç§»äº†ä»£å¸
    initialTransferDone = true;
}</code></pre>
                        
                        <div class="md-highlight">
                            <p>è®©æˆ‘ä»¬é€è¡Œåˆ†æï¼š</p>
                            
                            <p><strong>æ„é€ å‡½æ•°ç»§æ‰¿</strong></p>
                            <p>è¿™æ˜¯ä¸€ä¸ª<strong>æ„é€ å‡½æ•°</strong>ï¼Œå®ƒä¼šåœ¨åˆçº¦ç¬¬ä¸€æ¬¡éƒ¨ç½²æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚ä½†è¿™é‡Œæœ‰ä¸ªé‡è¦çš„äº‹æƒ…ï¼šè¿™ä¸ªåˆçº¦ç»§æ‰¿è‡ª <code class="inline-code">SimpleERC20</code>ï¼Œæ‰€ä»¥éœ€è¦æŠŠ <code class="inline-code">_initialSupply</code>ï¼ˆåˆå§‹ä»£å¸æ•°é‡ï¼‰ä¼ é€’ç»™çˆ¶åˆçº¦ï¼Œè¿™æ ·æ‰èƒ½çœŸçš„<strong>é“¸é€ ä»£å¸</strong>ã€‚å› æ­¤ï¼Œè¿™ä¸€è¡Œï¼š<code class="inline-code">SimpleERC20(_initialSupply)</code> å…¶å®æ˜¯åœ¨åå°å¸®ä½ æŠŠå…¨éƒ¨ä»£å¸åˆ†é…ç»™éƒ¨ç½²è€…ï¼ˆä½ ï¼‰ã€‚</p>
                            
                            <p><strong>è®¾ç½®ä»£å¸ä»·æ ¼</strong></p>
                            <p>è¿™å¥æ˜¯æŠŠæ¯ä¸ªä»£å¸çš„ä»·æ ¼è®°å½•ä¸‹æ¥ï¼Œå•ä½æ˜¯ <strong>wei</strong>ï¼ˆETH çš„æœ€å°å•ä½ï¼‰ï¼Œå°±åƒä¸€å—é’±æ‹†æˆä¸€åˆ†ã€ä¸€å˜ä¸€æ ·ã€‚å¦‚æœ <code class="inline-code">tokenPrice = 10**16</code>ï¼Œå°±ä»£è¡¨<strong>ä¸€ä¸ªä»£å¸çš„æˆæœ¬ä¸º 0.01 ETH</strong>ã€‚</p>
                            
                            <p><strong>è®¾ç½®å‘å”®æ—¶é—´</strong></p>
                            <p>æˆ‘ä»¬å°†å‘å”®çš„å¼€å§‹æ—¶é—´æ ‡è®°ä¸º<strong>ç°åœ¨</strong>â€”â€”å³åˆçº¦éƒ¨ç½²çš„é‚£ä¸€ç§’ã€‚å‘å”®æ´»åŠ¨æ˜¯é™æ—¶çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨å¼€å§‹æ—¶é—´ä¸Š<strong>æ·»åŠ æŒç»­æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰</strong>æ¥è®¾ç½®ç»“æŸæ—¶é—´ã€‚å¦‚æœä½ ä¼ å…¥ <code class="inline-code">604800</code>ï¼ˆä¸€å‘¨çš„ç§’æ•°ï¼‰ï¼Œé‚£å°±æ˜¯ 7 å¤©åå‘å”®ç»“æŸã€‚</p>
                            
                            <p><strong>è®¾ç½®è´­ä¹°é™åˆ¶</strong></p>
                            <p>è¿™ä¸¤è¡Œå®šä¹‰äº†ä¹°å®¶å¯ä»¥å‘é€çš„ ETH æ•°é‡çš„<strong>é™åˆ¶</strong>ï¼š<code class="inline-code">minPurchase</code> é˜²æ­¢æœ‰äººåªä¹°ä¸€ç‚¹ç‚¹ã€‚<code class="inline-code">maxPurchase</code> é˜²æ­¢æœ‰"å¤§æˆ·"æˆ–æœºå™¨äººä¸€æ¬¡ä¹°å¤ªå¤šã€‚è¿™ä¸¤ä¸ªå€¼ä¹Ÿä»¥ <strong>wei</strong> ä¸ºå•ä½ã€‚</p>
                            
                            <p><strong>è®¾ç½®é¡¹ç›®æ‰€æœ‰è€…</strong></p>
                            <p>æˆ‘ä»¬æŠŠé¡¹ç›®æ‰€æœ‰è€…ï¼ˆå³åº”è¯¥åœ¨å‘å”®æœŸé—´æ¥æ”¶ç­¹é›†çš„ ETH çš„äººï¼‰åœ°å€å­˜å‚¨ä¸‹æ¥ã€‚å‘å”®ç»“æŸåï¼Œåªæœ‰è¿™ä¸ªäººå¯ä»¥è°ƒç”¨ <code class="inline-code">finalizeSale()</code> å¹¶æå–èµ„é‡‘ã€‚</p>
                            
                            <p><strong>è‡ªåŠ¨è½¬ç§»ä»£å¸</strong></p>
                            <p>æœ‰è¶£çš„åœ°æ–¹æ¥äº†ï¼æ­¤æ—¶ï¼Œéƒ¨ç½²è€…ï¼ˆä½ ï¼‰æ‹¥æœ‰æ‰€æœ‰ä»£å¸â€”â€”å› ä¸º ERC-20 çš„è§„åˆ™å°±æ˜¯è¿™æ ·ã€‚ä½†ä½ ä¸æƒ³<strong>æ‰‹åŠ¨</strong>ä¸€ç¬”ä¸€ç¬”å°†è¿™äº›ä»£å¸è½¬ç»™å‘å”®åˆçº¦ã€‚æ‰€ä»¥åœ¨æ„é€ å‡½æ•°é‡Œï¼Œç¨‹åºä¼š<strong>è‡ªåŠ¨åœ°å°†æ‰€æœ‰ä»£å¸ä»éƒ¨ç½²è€…ï¼ˆä½ ï¼‰è½¬ç§»è‡³åˆçº¦é‡Œ</strong>ã€‚è¿™æ ·ï¼Œå‘å”®åˆçº¦å°±å˜æˆäº†"ä»£å¸åˆ†å‘å‘˜"ã€‚</p>
                            
                            <p><strong>æ ‡è®°è½¬ç§»å®Œæˆ</strong></p>
                            <p>è¿™å¥æ˜¯åšä¸ªæ ‡è®°ï¼Œå‘Šè¯‰ç³»ç»Ÿ"ä»éƒ¨ç½²è€…åˆ°åˆçº¦çš„ä»£å¸äº¤æ¥å·²ç»å®Œæˆ"ã€‚è¿™ä¸ªå¸ƒå°”å€¼ä¼šåœ¨ <code class="inline-code">transfer()</code> å‡½æ•°ä¸­ä½¿ç”¨ï¼Œç”¨æ¥ç¡®ä¿é”å®šåŠŸèƒ½åªæœ‰åœ¨ä»£å¸å·²è½¬å…¥åˆçº¦<strong>ä¹‹å</strong>æ‰ç”Ÿæ•ˆã€‚</p>
                        </div>
                        
                        <h2>isSaleActive()</h2>
                        
                        <pre><code class="language-solidity">function isSaleActive() public view returns (bool) {
    return (!finalized && block.timestamp >= saleStartTime && block.timestamp <= saleEndTime);
}</code></pre>
                        
                        <p>è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥æ£€æŸ¥å‘å”®æ˜¯å¦æ­£åœ¨è¿›è¡Œï¼šfinalized ä¸èƒ½æ˜¯ trueï¼ˆè¯´æ˜å‘å”®è¿˜æ²¡ç»“æŸï¼‰ã€å½“å‰æ—¶é—´å¿…é¡»åœ¨å‘å”®æ—¶é—´çª—å£å†…ã€‚æ•´ä¸ªåˆçº¦ä¼šç”¨è¿™ä¸ªå‡½æ•°æ¥åˆ¤æ–­ä»€ä¹ˆæ—¶å€™å¯ä»¥ä¹°ä»£å¸ã€‚</p>
                        
                        <h2>buyTokens() â€” ä¸»è¦è´­ä¹°å‡½æ•°</h2>
                        
                        <pre><code class="language-solidity">function buyTokens() public payable {
    require(isSaleActive(), "Sale is not active");
    require(msg.value >= minPurchase, "Amount is below minimum purchase");
    require(msg.value <= maxPurchase, "Amount exceeds maximum purchase");

    uint256 tokenAmount = (msg.value * 10**uint256(decimals)) / tokenPrice;
    require(balanceOf[address(this)] >= tokenAmount, "Not enough tokens left for sale");

    totalRaised += msg.value;
    _transfer(address(this), msg.sender, tokenAmount);
    emit TokensPurchased(msg.sender, msg.value, tokenAmount);
}</code></pre>
                        
                        <div class="md-highlight">
                            <p>è¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨æˆ·åœ¨å‘å”®æœŸé—´ä¹°ä»£å¸æ—¶è¦ç”¨çš„ã€‚ä»–ä»¬ä¼šè°ƒç”¨ <code class="inline-code">buyTokens()</code> å¹¶éšäº¤æ˜“å‘é€ ETHã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
                            
                            <p><strong>1. æ£€æŸ¥å‘å”®æ˜¯å¦è¿˜åœ¨è¿›è¡Œ</strong></p>
                            <p>å…ˆç”¨è¾…åŠ©å‡½æ•° <code class="inline-code">isSaleActive()</code> æ£€æŸ¥å‘å”®æ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­ã€‚å¦‚æœå‘å”®å·²ç»“æŸã€å°šæœªå¼€å§‹æˆ–å·²å®Œæˆï¼Œåˆ™æ­¤æ£€æŸ¥å¤±è´¥ï¼Œäº¤æ˜“å°†è¢«æ’¤é”€ã€‚</p>
                            
                            <p><strong>2. æ‰§è¡Œæœ€ä½å’Œæœ€é«˜è´­ä¹°é™é¢</strong></p>
                            <p>æˆ‘ä»¬æƒ³è¦æ§åˆ¶ç”¨æˆ·åœ¨ä¸€ç¬”äº¤æ˜“ä¸­å¯ä»¥å‘é€çš„ ETH çš„æœ€å°å’Œæœ€å¤§é‡‘é¢ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢åƒåœ¾è´­ä¹°æˆ–æ¥è‡ªæœºå™¨äººçš„å·¨é¢è´­ä¹°ã€‚è¿™ä¸¤è¡Œç¡®ä¿å‘é€çš„ ETH é‡‘é¢åœ¨å…è®¸èŒƒå›´å†…ã€‚</p>
                            
                            <p><strong>3. è®¡ç®—è¦å‘å¤šå°‘ä»£å¸</strong></p>
                            <p>ç°åœ¨æˆ‘ä»¬è®¡ç®—ä¹°å®¶å‘é€çš„ ETH åº”è¯¥è·å¾—å¤šå°‘ä»£å¸ã€‚æˆ‘ä»¬å°† ETH æ•°é‡ï¼ˆ<code class="inline-code">msg.value</code>ï¼‰ä¹˜ä»¥ <code class="inline-code">10 ** decimals</code>ï¼ˆè¯·è®°ä½ï¼šå¤§å¤šæ•° ERC-20 ä»£å¸æœ‰ 18 ä½å°æ•°ï¼‰ã€‚å†é™¤ä»¥æ¯ä¸ªä»£å¸çš„ä»·æ ¼ <code class="inline-code">tokenPrice</code>ã€‚è¿™èƒ½ç®—å‡ºä¹°å®¶èƒ½æ”¶åˆ°çš„ä»£å¸æ•°é‡ã€‚</p>
                            
                            <p><strong>4. ç¡®ä¿åˆçº¦é‡Œæœ‰è¶³å¤Ÿçš„ä»£å¸</strong></p>
                            <p>å³ä½¿ç”¨æˆ·å‘é€äº†æœ‰æ•ˆçš„ ETH å¹¶ç”³è¯·äº†åˆç†æ•°é‡çš„ä»£å¸ï¼Œæˆ‘ä»¬è¿˜è¦æ£€æŸ¥åˆçº¦é‡Œæ˜¯å¦æŒæœ‰è¶³å¤Ÿçš„ä»£å¸æ¥æ»¡è¶³è¯·æ±‚ã€‚å¦‚æœæ²¡æœ‰ï¼Œè´­ä¹°å°†è¢«é˜»æ­¢ã€‚</p>
                            
                            <p><strong>5. æ›´æ–°å·²ç­¹é›†çš„ ETH æ€»é¢</strong></p>
                            <p>è¿™å¥ä»£ç ä¼šè®°å½•æœ¬æ¬¡å‘å”®ä¸­æ¥æ”¶çš„ ETH çš„ç´¯è®¡æ€»é¢ã€‚å‘å”®ç»“æŸæ—¶ï¼Œæˆ‘ä»¬ä¼šç”¨è¿™ä¸ªæ€»é¢æ¥ç»“è´¦ã€‚</p>
                            
                            <p><strong>6. æŠŠä»£å¸è½¬ç»™ä¹°å®¶</strong></p>
                            <p>è¿™é‡Œå°±æ˜¯ä»£å¸çœŸçš„"åŠ¨èµ·æ¥"çš„åœ°æ–¹ã€‚åˆçº¦ä¼šæŠŠè‡ªå·±è´¦æˆ·é‡Œçš„ä»£å¸è½¬ç»™ä¹°å®¶ã€‚<code class="inline-code">address(this)</code> æ˜¯åˆçº¦çš„åœ°å€ï¼ˆå‘å”®æœŸé—´æ‰€æœ‰ä»£å¸éƒ½æ”¾åœ¨è¿™é‡Œï¼‰ã€‚<code class="inline-code">msg.sender</code> æ˜¯ä¹°å®¶çš„åœ°å€ã€‚è¿™ä¸ª <code class="inline-code">_transfer()</code> å‡½æ•°æ˜¯åœ¨æˆ‘ä»¬ä¹‹å‰æ„å»ºçš„ ERC-20 ä»£å¸ä¸­å®šä¹‰çš„ã€‚</p>
                            
                            <p><strong>7. è§¦å‘è´­ä¹°äº‹ä»¶</strong></p>
                            <p>æˆ‘ä»¬è§¦å‘ <code class="inline-code">TokensPurchased</code> äº‹ä»¶ï¼Œè®°å½•ï¼šè°ä¹°ä»£å¸ã€èŠ±äº†å¤šå°‘ ETHã€æ”¶åˆ°å¤šå°‘ä»£å¸ã€‚</p>
                        </div>
                        
                        <h2>é‡å†™ transfer() â€” é”å®šç›´æ¥è½¬è´¦</h2>
                        
                        <pre><code class="language-solidity">function transfer(address _to, uint256 _value) public override returns (bool) {
    if (!finalized && msg.sender != address(this) && initialTransferDone) {
        require(false, "Tokens are locked until sale is finalized");
    }
    return super.transfer(_to, _value);
}</code></pre>
                        
                        <div class="md-highlight">
                            <p>è¿™ä¸ªå‡½æ•°é‡å†™äº†æ ‡å‡†çš„ ERC-20 <code class="inline-code">transfer()</code> å‡½æ•°ã€‚è¿™é‡Œçš„ä¸»è¦ç›®çš„æ˜¯åœ¨å‘å”®è¿›è¡ŒæœŸé—´<strong>æš‚æ—¶é™åˆ¶ä»£å¸è½¬è´¦</strong>ã€‚</p>
                            
                            <p><strong>æ£€æŸ¥å‘å”®</strong></p>
                            <p>æ­¤æ¡ä»¶æ£€æŸ¥ä¸‰ä»¶äº‹ï¼š<code class="inline-code">!finalized</code>ï¼šå‘å”®<strong>å°šæœª</strong>å®Œæˆã€‚<code class="inline-code">msg.sender != address(this)</code>ï¼šäº¤æ˜“<strong>ä¸æ˜¯ç”±åˆçº¦æœ¬èº«</strong>å‘èµ·çš„ï¼ˆä¾‹å¦‚åœ¨ <code class="inline-code">buyTokens()</code> æœŸé—´ï¼‰ã€‚<code class="inline-code">initialTransferDone</code>ï¼šåˆå§‹ä»£å¸ä¾›åº”å·²ç»è½¬ç§»åˆ°åˆçº¦ä¸­ã€‚å¦‚æœè¿™ä¸‰ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œå‡½æ•°ä¼šå›æ»šï¼Œäº¤æ˜“ä¼šè¢«æ’¤é”€ã€‚</p>
                            
                            <p>ä¸ºä»€ä¹ˆè¦è¿™æ ·ï¼Ÿè¿™æ ·å¯ä»¥ä¿è¯<strong>å‘å”®æœŸé—´</strong>æ²¡äººèƒ½æå‰äº¤æ˜“ä»£å¸ï¼Œè¿™æœ‰åŠ©äºé˜²æ­¢ï¼šè¿‡æ—©äº¤æ˜“æˆ–æŠ•æœºã€æœºå™¨äººæŠ¢è´­ä»£å¸å¹¶æŠ›å”®ã€ä»£å¸ä¸Šçº¿å‰çš„æ“çºµã€‚ä¸€æ—¦å‘å”®å®Œæˆï¼Œè¿™ä¸ªæ¡ä»¶å˜ä¸ºæ— æ•ˆï¼Œå¤§å®¶å¯ä»¥è‡ªç”±è½¬è´¦ã€‚</p>
                            
                            <p><strong>æ­£å¸¸è½¬è´¦</strong></p>
                            <p>å¦‚æœå‘å”®å·²å®Œæˆï¼ˆæˆ–è€…å‘é€è€…æ˜¯åˆçº¦æœ¬èº«ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è°ƒç”¨çˆ¶åˆçº¦çš„åŸå§‹ <code class="inline-code">transfer()</code> å‡½æ•°ã€‚è¿™ä¼šæ‰§è¡Œå®é™…çš„è½¬è´¦é€»è¾‘ã€‚</p>
                        </div>
                        
                        <h2>é‡å†™ transferFrom() â€” é”å®šå§”æ‰˜è½¬è´¦</h2>
                        
                        <pre><code class="language-solidity">function transferFrom(address _from, address _to, uint256 _value) public override returns (bool) {
    if (!finalized && _from != address(this)) {
        require(false, "Tokens are locked until sale is finalized");
    }
    return super.transferFrom(_from, _to, _value);
}</code></pre>
                        
                        <div class="md-highlight">
                            <p>å°±åƒ <code class="inline-code">transfer()</code> ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°é‡å†™äº† ERC-20 çš„ <code class="inline-code">transferFrom()</code>â€”â€”ä½†å®ƒç”¨äº<strong>å§”æ‰˜è½¬è´¦</strong>ï¼Œå³æŸäººä»£è¡¨å¦ä¸€ä¸ªé’±åŒ…æ¶ˆè´¹ä»£å¸ï¼ˆé€šå¸¸åœ¨ <code class="inline-code">approve()</code> è°ƒç”¨ä¹‹åï¼‰ã€‚</p>
                            
                            <p><strong>å‘å”®é”å®šæ£€æŸ¥</strong></p>
                            <p>æˆ‘ä»¬å†æ¬¡æ£€æŸ¥ï¼šå‘å”®è¿˜åœ¨ç»§ç»­å—ï¼Ÿè½¬è´¦æ˜¯å¦ä¸æ˜¯æ¥è‡ªåˆçº¦ï¼Ÿå¦‚æœæ˜¯ï¼Œäº¤æ˜“åœæ­¢ã€‚è¿™ç¡®ä¿äº†<strong>å³ä½¿æ˜¯å·²è·æ‰¹å‡†çš„æ¶ˆè´¹è€…ï¼Œ</strong>ä¹Ÿä¸èƒ½åœ¨å‘å”®æœŸé—´ä»¥ä»–äººçš„åä¹‰è½¬ç§»ä»£å¸ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæœ‰äººå¯èƒ½ä¼šæ‰¹å‡†ä¸€ä»½åˆçº¦ï¼ˆæ¯”å¦‚ Uniswapï¼‰ï¼Œå¹¶ä¸”è¯¥åˆçº¦ç”šè‡³å¯ä»¥åœ¨å‘å”®è¿›è¡Œæ—¶äº¤æ˜“ä»£å¸â€”â€”è¿™å°±è¿èƒŒäº†è½¬ç§»é”å®šçš„æ•´ä¸ªç›®çš„ã€‚</p>
                            
                            <p><strong>æ¢å¤é»˜è®¤é€»è¾‘</strong></p>
                            <p>å¦‚æœæ£€æŸ¥é€šè¿‡ï¼ˆå‘å”®å®Œæˆæˆ–è½¬ç§»ç”±åˆçº¦å‘èµ·ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code class="inline-code">super</code> å›é€€åˆ°åŸå§‹çš„ ERC-20 <code class="inline-code">transferFrom()</code>ï¼Œæ¢å¤é»˜è®¤çš„è½¬è´¦é€»è¾‘ã€‚</p>
                        </div>
                        
                        <h2>finalizeSale()</h2>
                        
                        <pre><code class="language-solidity">function finalizeSale() public payable {
    require(msg.sender == projectOwner, "Only Owner can call the function");
    require(!finalized, "Sale already finalized");
    require(block.timestamp > saleEndTime, "Sale not finished yet");

    finalized = true;
    uint256 tokensSold = totalSupply - balanceOf[address(this)];

    (bool success, ) = projectOwner.call{value: address(this).balance}("");
    require(success, "Transfer to project owner failed");

    emit SaleFinalized(totalRaised, tokensSold);
}</code></pre>
                        
                        <div class="md-highlight">
                            <p>è¿™æ˜¯<strong>ç»“æŸä»£å¸å‘å”®</strong>çš„å‡½æ•°â€”â€”å°±åƒåœ¨å‘å¸ƒæ—¥ç»“æŸåå…³åº—ä¸€æ ·ã€‚è®©æˆ‘ä»¬é€æ­¥åˆ†æï¼š</p>
                            
                            <p><strong>è®¿é—®æ§åˆ¶å’Œè®¡æ—¶</strong></p>
                            <p>è¿™ä¸‰ä¸ª <code class="inline-code">require()</code> æ£€æŸ¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š1. <strong>åªæœ‰é¡¹ç›®æ‰€æœ‰è€…</strong>å¯ä»¥è°ƒç”¨æ­¤å‡½æ•°â€”â€”é˜²æ­¢æ— å…³ç”¨æˆ·å¹²æ‰°å‘å”®æµç¨‹ã€‚2. æ£€æŸ¥æ˜¯å¦å·²å®Œæˆå‘å”®â€”â€”å¦‚æœå·²å®Œæˆï¼Œåˆ™ä¸å…è®¸å†æ¬¡è°ƒç”¨ã€‚3. ç¡®ä¿å‘å”®æœŸå·²ç»“æŸï¼ˆä¾æ®ç»“æŸæ—¶é—´æˆ³ï¼‰â€”â€”ä»è€Œä¸èƒ½æå‰ç»ˆæ­¢å‘å”®ã€‚</p>
                            
                            <p><strong>å°†å‘å”®æ ‡è®°ä¸ºå®Œæˆ</strong></p>
                            <p>æˆ‘ä»¬æŠŠ <code class="inline-code">finalized</code> çŠ¶æ€å˜é‡è®¾ç½®ä¸ºå·²å®Œæˆï¼Œä»¥ä¾¿å…¶ä»–å‡½æ•°ï¼ˆå¦‚ <code class="inline-code">transfer()</code> å’Œ <code class="inline-code">transferFrom()</code>ï¼‰è¯†åˆ«å‘å”®å·²ç»“æŸã€‚éšåç³»ç»Ÿå°†è§£é™¤é”å®šï¼Œæ¢å¤è‡ªç”±è½¬è´¦ã€‚</p>
                            
                            <p><strong>è®¡ç®—å·²å”®å‡ºçš„ä»£å¸æ•°é‡</strong></p>
                            <p>å¦‚ä¸‹è®¡ç®—æœ¬æ¬¡å®é™…å”®å‡ºçš„ä»£å¸ï¼š<code class="inline-code">totalSupply</code> è¡¨ç¤ºä»£å¸çš„æ€»å‘è¡Œé‡ã€‚<code class="inline-code">balanceOf[address(this)]</code> è¡¨ç¤ºåˆçº¦å½“å‰æŒæœ‰çš„ä»£å¸ä½™é¢ï¼ˆå³å°šæœªå”®å‡ºéƒ¨åˆ†ï¼‰ã€‚ä¸¤è€…ç›¸å‡å³ä¸ºå·²åˆ†é…ç»™ç”¨æˆ·çš„ä»£å¸æ•°é‡ã€‚</p>
                            
                            <p><strong>å‘é¡¹ç›®æ‰€æœ‰è€…å‘é€ ETH</strong></p>
                            <p>æ­¤å¤„æŠŠå‘å”®æœŸé—´ç­¹é›†åˆ°çš„<strong>å…¨éƒ¨ ETH</strong> è½¬ç»™ <code class="inline-code">projectOwner</code>ã€‚<code class="inline-code">address(this).balance</code> è¡¨ç¤ºè¯¥åˆçº¦åœ°å€å½“å‰æŒæœ‰çš„ ETH æ€»é¢ã€‚æˆ‘ä»¬ä½¿ç”¨ <code class="inline-code">.call{value: ...}</code> æ¥å‘é€èµ„é‡‘ã€‚<code class="inline-code">require(success)</code> ç”¨äºç¡®ä¿è¿™æ¬¡å‘é€æ²¡æœ‰é™é»˜å¤±è´¥ï¼ˆå³å¤±è´¥ä½†æ— æŠ¥é”™æç¤ºï¼‰ã€‚é¡¹ç›®æ–¹å¯ä»¥æ­¤æ”¶å–æœ¬æ¬¡å‘å”®ç­¹å¾—çš„ ETHã€‚</p>
                            
                            <p><strong>è§¦å‘æœ€ç»ˆäº‹ä»¶</strong></p>
                            <p>æœ€åï¼Œæˆ‘ä»¬è§¦å‘ <code class="inline-code">SaleFinalized</code> äº‹ä»¶ï¼Œå…¶ä¸­åŒ…å«ï¼šç­¹é›†çš„ ETH æ€»é¢ã€å”®å‡ºçš„ä»£å¸æ•°é‡ã€‚å‰ç«¯é¡µé¢ã€DApp æˆ–åŒºå—æµè§ˆå™¨å¯ç›‘å¬è¯¥äº‹ä»¶ï¼Œä»è€Œå‘ç”¨æˆ·æ˜¾ç¤ºå‘å”®å·²æ­£å¼å®Œæˆã€‚</p>
                        </div>
                        
                        <h2>timeRemaining() å’Œ tokensAvailable() â€” å‘å”®çŠ¶æ€è¾…åŠ©å‡½æ•°</h2>
                        
                        <p>è¿™ä¸¤ä¸ªåªè¯»å‡½æ•°ä¸ºå‰ç«¯ã€çœ‹æ¿æˆ–å…¶ä»–æ™ºèƒ½åˆçº¦æä¾›ä¾¿æ·çš„å®æ—¶ä¿¡æ¯æŸ¥è¯¢èƒ½åŠ›ã€‚</p>
                        
                        <h3>timeRemaining()</h3>
                        
                        <pre><code class="language-solidity">function timeRemaining() public view returns (uint256) {
    if (block.timestamp >= saleEndTime) {
        return 0;
    }
    return saleEndTime - block.timestamp;
}</code></pre>
                        
                        <p>è¯¥å‡½æ•°è¿”å›è·ç¦»å‘å”®ç»“æŸè¿˜å‰©ä½™å¤šå°‘ç§’ã€‚å®ƒå°†<strong>å½“å‰åŒºå—æ—¶é—´æˆ³</strong>ï¼ˆ<code class="inline-code">block.timestamp</code>ï¼‰ä¸é¢„å®šä¹‰çš„ <code class="inline-code">saleEndTime</code> è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœå‘å”®å·²ç»ç»“æŸï¼Œè¿”å› <code class="inline-code">0</code>ã€‚å¦åˆ™ï¼Œè¿”å›å½“å‰æ—¶é—´å’Œç»“æŸæ—¶é—´ä¹‹é—´çš„å·®å€¼ã€‚<strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>å‰ç«¯å¯ä»¥è°ƒç”¨æ­¤å‡½æ•°æ¥æ˜¾ç¤ºå€’è®¡æ—¶ï¼Œä¾‹å¦‚"è¿˜å‰© 2 å°æ—¶ 15 åˆ†é’Ÿ"â€”â€”æ—¢èƒ½ä½“ç°ç´§è¿«æ„Ÿï¼Œä¹Ÿæ–¹ä¾¿ç”¨æˆ·æŠŠæ¡æœ€åå‚ä¸æ—¶æœºã€‚</p>
                        
                        <h3>tokensAvailable() å¯è´­ä¹°ä»£å¸æ•°é‡</h3>
                        
                        <pre><code class="language-solidity">function tokensAvailable() public view returns (uint256) {
    return balanceOf[address(this)];
}</code></pre>
                        
                        <p>è¯¥å‡½æ•°è¿”å›å½“å‰<strong>å¯è´­ä¹°</strong>çš„ä»£å¸æ•°é‡ã€‚å‘å”®æœŸå†…ï¼Œå‘å”®åˆçº¦æŒæœ‰å…¨éƒ¨å¾…å”®ä»£å¸ã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€ä½¿ç”¨ <code class="inline-code">balanceOf[address(this)]</code> è¿”å›å…¶å½“å‰ä½™é¢ã€‚<strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>å‰ç«¯æˆ– DApp å¯æ˜¾ç¤º"å‰©ä½™ X ä¸ªä»£å¸"ï¼Œè®©ä¹°å®¶åŠæ—¶äº†è§£åº“å­˜ã€æå‡å†³ç­–æ•ˆç‡ã€‚</p>
                        
                        <p>è¿™äº›è¾…åŠ©å‡½æ•°ä¸ºä½•æœ‰ç”¨ï¼šå°½ç®¡å®ç°ç®€å•ï¼Œå®ƒä»¬å¯¹æå‡å‘å”®çš„<strong>æ˜“ç”¨æ€§</strong>ä½œç”¨æ˜¾è‘—ï¼šå®ƒä»¬å¯æä¾›å®æ—¶æ•°æ®å±•ç¤ºã€ä½œä¸º view å‡½æ•°ï¼Œå¯¹å¤–éƒ¨è°ƒç”¨ä¸æ¶ˆè€— gasï¼ˆé“¾ä¸‹è¯»å–ï¼‰ã€åŒæ—¶è®©åˆçº¦é€»è¾‘æ›´æ¸…æ™°ã€æ˜“è¯»ã€æ˜“é›†æˆã€‚æ— è®ºæ˜¯å¼€å‘ç²¾ç¾çš„å¯è§†åŒ–çœ‹æ¿ï¼Œè¿˜æ˜¯è°ƒè¯•åˆçº¦ï¼Œè¿™äº›è¾…åŠ©å‡½æ•°éƒ½ä¼šæ˜¾è‘—é™ä½å·¥ä½œéš¾åº¦ã€‚</p>
                        
                        <h2>receive() â€” ETHå›é€€å¤„ç†å™¨</h2>
                        
                        <pre><code class="language-solidity">receive() external payable {
    buyTokens();
}</code></pre>
                        
                        <div class="md-highlight">
                            <p>è¯¥å‡½æ•°æ˜¾è‘—æå‡è´­ä¹°æµç¨‹çš„ä¸æ»‘ä¸ç›´è§‰æ€§â€”â€”å¯¹éæŠ€æœ¯ç”¨æˆ·å°¤ä¸ºå‹å¥½ã€‚åœ¨ Solidity ä¸­ï¼Œ<code class="inline-code">receive()</code> å‡½æ•°æ˜¯ä¸€ä¸ª<strong>ç‰¹æ®Šçš„å›é€€å‡½æ•°</strong>ï¼Œåœ¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶è¢«è§¦å‘ï¼šæœ‰äºº<strong>ç›´æ¥</strong>å‘åˆçº¦åœ°å€å‘é€ ETHã€ä¸”<strong>æœªæŒ‡å®š</strong>è¦è°ƒç”¨çš„ä»»ä½•å‡½æ•°ã€‚</p>
                            
                            <p>é€šå¸¸è‹¥åˆçº¦æœªå®šä¹‰è¯¥å‡½æ•°ï¼Œå¤–éƒ¨ç›´æ¥è½¬å…¥ ETH çš„äº¤æ˜“ä¼šå¤±è´¥ã€‚ä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®šä¹‰äº† <code class="inline-code">receive()</code>ï¼Œåªè¦æœ‰äººå‘è¯¥åˆçº¦è½¬å…¥ ETHï¼ˆå³ä½¿åªæ˜¯ä» MetaMask æˆ–ç®€å•çš„é’±åŒ…è½¬è´¦ï¼‰ï¼Œåˆçº¦éƒ½ä¼šåœ¨åå°<strong>è‡ªåŠ¨è°ƒç”¨ <code class="inline-code">buyTokens()</code> å®Œæˆè´­ä¹°æµç¨‹</strong>ã€‚</p>
                            
                            <p>è¿™æ„å‘³ç€ï¼šç”¨æˆ·æ— éœ€è¿›å…¥ dApp çš„ç•Œé¢æ“ä½œã€æ— éœ€æ‰‹åŠ¨è°ƒç”¨ <code class="inline-code">buyTokens()</code> å‡½æ•°ã€åªéœ€å‘é€ ETHï¼Œå³å¯å‚ä¸å‘å”®ã€‚è™½æ˜¯å°æ”¹åŠ¨ï¼Œå´æ˜¾è‘—æ”¹å–„ç”¨æˆ·ä½“éªŒâ€”â€”å³ä½¿ç”¨æˆ·å¿˜è®°è°ƒç”¨è´­ä¹°å‡½æ•°ï¼Œä¹Ÿä»èƒ½è·å¾—ä»£å¸ã€‚æ€»ä¹‹ï¼š<code class="inline-code">receive()</code> æ—¢æ˜¯å®‰å…¨å…œåº•ï¼Œåˆæ˜¯å¿«é€Ÿé€šé“ã€‚å®ƒçš„åŠŸèƒ½æ˜¯å…è®¸ ETH æµå…¥ï¼Œå¹¶å°† ETH ç›´æ¥è·¯ç”±åˆ°ä»£å¸é”€å”®é€»è¾‘ä¸­ã€‚</p>
                        </div>
                        
                        <h2>æ€»ç»“</h2>
                        
                        <p>è‡³æ­¤ï¼Œä½ å·²ä»é›¶æ­å»ºå‡ºä¸€ä¸ªå®Œæ•´çš„ <strong>ERC-20 ä»£å¸å‘å”®</strong>ç³»ç»Ÿã€‚ä½ åšçš„ä¸ä»…æ˜¯å†™ä¸€ä¸ªæ™ºèƒ½åˆçº¦â€”â€”è€Œæ˜¯å®Œæˆäº†ä¸€ä¸ªçœŸå®åŠ å¯†é¡¹ç›®å¸¸ç”¨çš„<strong>é¢„å”®ç³»ç»Ÿ</strong>ã€‚ä½ å·²ç»æŒæ¡äº†ï¼š</p>
                        <ul>
                            <li>å¦‚ä½•éƒ¨ç½²è‡ªå®šä¹‰ ERC-20 ä»£å¸</li>
                            <li>å¦‚ä½•æ­å»ºå«å®šä»·é€»è¾‘çš„é™æ—¶å‘å”®</li>
                            <li>å¦‚ä½•ç”¨ ETH å®Œæˆè´­ä¹°å¹¶å®æ—¶åˆ†å‘ä»£å¸</li>
                            <li>å¦‚ä½•åœ¨å‘å”®æœŸé”å®šè½¬è´¦ä»¥æŠ‘åˆ¶æŠ•æœºè¡Œä¸º</li>
                            <li>å¦‚ä½•ç»“æŸå‘å”®å¹¶æŠŠç­¹å¾—èµ„é‡‘å®‰å…¨è½¬å…¥é¡¹ç›®é’±åŒ…</li>
                        </ul>
                        
                        <blockquote>
                            <p>æ›´é‡è¦çš„æ˜¯â€”â€”æ‚¨äº†è§£äº†æ¯ä¸ªéƒ¨åˆ†çš„<strong>é‡è¦æ€§</strong>ã€‚ä»ä¿æŠ¤ä¹°å®¶ã€ç»´æŠ¤å…¬å¹³ï¼Œåˆ°ç²¾ç¡®çš„ ETH â†” ä»£å¸æ¢ç®—ã€åˆ°æ›´åŠ ç”¨æˆ·å‹å¥½çš„ <code class="inline-code">receive()</code> å‡½æ•°â€”â€”æ‚¨å·²ç»çœ‹åˆ°æ™ºèƒ½åˆçº¦å¦‚ä½•æŠŠè¿™äº›è¦ç´ æ•´åˆåœ¨ä¸€èµ·ã€‚è¿™å¥—æ¶æ„æ˜¯è¯¸å¤š DeFi å‘è¡Œã€DAO å‹Ÿèµ„ï¼Œç”šè‡³ NFT ç©ºæŠ•ï¼ˆç•¥æœ‰è°ƒæ•´ï¼‰çš„æ”¯æŸ±ã€‚æ‚¨å·²ç»è¸å…¥äº†ç”±<strong>æ™ºèƒ½åˆçº¦é©±åŠ¨çš„ä¼—ç­¹</strong>ä¸–ç•Œã€‚</p>
                        </blockquote>
                        
                        <div class="signature">
                            <p>çœŸè¯šçš„ï¼Œ</p>
                            <p>Sneha</p>
                            <p style="margin-top: 10px; font-size: 1.5rem; opacity: 0.8;">è¯‘è€…ï¼šHe Shadow</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/solidity.min.js"></script>
    <script>
        hljs.highlightAll();
        
        // å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
            
        // Snehaçš„ä¸€å°æ¥ä¿¡æ¨¡å—åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const envelopeContainer = document.getElementById('envelope-container');
            const answerModal = document.getElementById('answer-modal');
            const closeLetter = document.getElementById('close-letter');
            
            if (!envelopeContainer || !answerModal || !closeLetter) {
                return; // å¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›
            }
            
            // ç‚¹å‡»ä¿¡å°æ‰“å¼€å¼¹çª—
            envelopeContainer.addEventListener('click', function() {
                envelopeContainer.classList.add('open');
                
                // å»¶è¿Ÿæ˜¾ç¤ºå¼¹çª—ï¼Œè®©ä¿¡å°ç¿»è½¬åŠ¨ç”»å®Œæˆ
                setTimeout(function() {
                    answerModal.style.display = 'flex';
                    setTimeout(function() {
                        answerModal.classList.add('open');
                    }, 50);
                }, 400);
            });
            
            // å…³é—­å¼¹çª—
            closeLetter.addEventListener('click', function() {
                answerModal.classList.remove('open');
                
                setTimeout(function() {
                    answerModal.style.display = 'none';
                    envelopeContainer.classList.remove('open');
                }, 600);
            });
            
            // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
            answerModal.addEventListener('click', function(e) {
                if (e.target === answerModal) {
                    closeLetter.click();
                }
            });
        });
    </script>
</body>
</html>