<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3 Solidity 30天入门 - 中文学习站</title>
    <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&family=Reenie+Beanie&family=Comic+Neue:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --easy: #43AA8B;
            --medium: #F8961E;
            --hard: #E71D36;
            --expert: #7209B7;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
            color: var(--dark);
            line-height: 1.6;
            background-image: radial-gradient(#d0e3ff 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        .header {
            text-align: center;
            padding: 40px 20px;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-family: 'Gochi Hand', cursive;
            font-size: 3.5rem;
            color: var(--secondary);
            margin-bottom: 10px;
            text-shadow: 2px 2px 3px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            font-family: 'Reenie Beanie', cursive;
            font-size: 2rem;
            color: var(--primary);
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            flex-wrap: wrap;
        }
        
        .nav-tab {
            font-family: 'Comic Neue', cursive;
            background: white;
            border: 3px solid var(--primary);
            border-radius: 15px;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
        }
        
        .nav-tab:hover, .nav-tab.active {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            border: 3px solid;
            transform: rotate(-1deg);
            transition: transform 0.3s;
        }
        
        .stat-card:nth-child(even) {
            transform: rotate(1deg);
        }
        
        .stat-card:hover {
            transform: scale(1.05) rotate(0deg);
        }
        
        .stat-card.easy { border-color: var(--easy); }
        .stat-card.medium { border-color: var(--medium); }
        .stat-card.hard { border-color: var(--hard); }
        .stat-card.expert { border-color: var(--expert); }
        
        .stat-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            font-family: 'Gochi Hand', cursive;
        }
        
        .stat-label {
            font-size: 1.1rem;
            color: #666;
            margin-top: 5px;
        }
        
        .contracts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .contract-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
            border-left: 5px solid;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }
        
        .contract-card:hover {
            transform: translateX(5px);
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }
        
        .contract-card.completed {
            background: linear-gradient(135deg, #f0fff4, #e6fffa);
            border-left-color: #28a745 !important;
        }
        
        .contract-card.completed::before {
            content: "✓";
            position: absolute;
            top: -5px;
            right: -5px;
            background: #28a745;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .contract-card.easy { border-color: var(--easy); }
        .contract-card.medium { border-color: var(--medium); }
        .contract-card.hard { border-color: var(--hard); }
        .contract-card.expert { border-color: var(--expert); }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .day-number {
            font-family: 'Gochi Hand', cursive;
            font-size: 1.3rem;
            color: var(--secondary);
            font-weight: bold;
        }
        
        .difficulty-badge {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: bold;
            color: white;
        }
        
        .difficulty-badge.easy { background: var(--easy); }
        .difficulty-badge.medium { background: var(--medium); }
        .difficulty-badge.hard { background: var(--hard); }
        .difficulty-badge.expert { background: var(--expert); }
        
        .contract-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 8px;
        }
        
        .contract-desc {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 12px;
        }
        
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .tag {
            background: var(--light);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            color: var(--secondary);
        }
        
        .complete-btn {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .complete-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .complete-btn.completed {
            background: #28a745;
            border-color: #28a745;
            color: white;
            box-shadow: 0 2px 6px rgba(40, 167, 69, 0.3);
        }
        
        .complete-btn.completed:hover {
            background: #218838;
            border-color: #218838;
            box-shadow: 0 4px 10px rgba(40, 167, 69, 0.4);
        }
        
        .complete-btn.completed::before {
            content: "✓";
            font-weight: bold;
        }
        
        .category-section {
            margin-bottom: 40px;
        }
        
        .category-title {
            font-family: 'Gochi Hand', cursive;
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px dashed var(--accent);
        }
        
        .progress-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .progress-bar-container {
            background: #e9ecef;
            border-radius: 50px;
            height: 30px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--primary));
            border-radius: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 1s ease-out;
        }
        
        .difficulty-explanation-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .difficulty-explanation-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🚀 Web3 Solidity 30天挑战</h1>
        <p class="subtitle">从零基础到DeFi大师 —— 中文完全指南</p>
    </div>

    <div class="nav-tabs">
        <button class="nav-tab active" onclick="showTab('overview')">📊 概览</button>
        <button class="nav-tab" onclick="showTab('difficulty')">🎯 按难度</button>
        <button class="nav-tab" onclick="showTab('category')">📚 按主题</button>
        <a href="roadmap.html" class="nav-tab" style="text-decoration: none;">🗺️ 学习路线</a>
    </div>

    <div class="container">
        <!-- 概览标签 -->
        <div id="overview" class="content-section active">
            <div class="progress-section">
                <h2 style="font-family: 'Gochi Hand', cursive; color: var(--secondary); margin-bottom: 15px;">
                    你的学习进度
                </h2>
                <div class="progress-bar-container">
                    <div class="progress-bar" style="width: 0%">0% 完成</div>
                </div>
                <p style="margin-top: 10px; text-align: center; color: #666;">
                    已完成 <span id="completed-count">0</span> / 30 个挑战
                </p>
                <div style="text-align: center; margin-top: 15px;">
                    <button onclick="resetProgress()" style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 5px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s;">
                        🔄 重置进度
                    </button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card easy">
                    <div class="stat-icon" style="color: var(--easy);">🌱</div>
                    <div class="stat-number" style="color: var(--easy);">7</div>
                    <div class="stat-label">基础挑战 (1-7天)</div>
                </div>
                <div class="stat-card medium">
                    <div class="stat-icon" style="color: var(--medium);">🌿</div>
                    <div class="stat-number" style="color: var(--medium);">6</div>
                    <div class="stat-label">中级挑战 (8-13天)</div>
                </div>
                <div class="stat-card hard">
                    <div class="stat-icon" style="color: var(--hard);">🌳</div>
                    <div class="stat-number" style="color: var(--hard);">7</div>
                    <div class="stat-label">高级挑战 (14-20天)</div>
                </div>
                <div class="stat-card expert">
                    <div class="stat-icon" style="color: var(--expert);">🏆</div>
                    <div class="stat-number" style="color: var(--expert);">10</div>
                    <div class="stat-label">困难挑战 (21-30天)</div>
                </div>
            </div>

            <div class="contracts-grid" id="all-contracts">
                <!-- 动态加载所有合约卡片 -->
            </div>
        </div>

        <!-- 按难度标签 -->
        <div id="difficulty" class="content-section">
            <div class="category-section">
                <h2 class="category-title">🌱 基础 (第1-7天)</h2>
                <div class="contracts-grid" id="easy-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">🌿 中级 (第8-13天)</h2>
                <div class="contracts-grid" id="medium-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">🌳 高级 (第14-20天)</h2>
                <div class="contracts-grid" id="hard-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">🏆 困难 (第21-30天)</h2>
                <div class="contracts-grid" id="expert-contracts"></div>
            </div>
            
            <!-- 难度说明 -->
            <div style="background: white; border-radius: 15px; padding: 25px; margin-top: 30px; box-shadow: 3px 3px 10px rgba(0,0,0,0.1); border-left: 5px solid var(--accent);">
                <h3 style="font-family: 'Gochi Hand', cursive; color: var(--secondary); margin-bottom: 15px; font-size: 1.5rem;">
                    📊 难度评级说明
                </h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;" class="difficulty-explanation-grid">
                    <div style="background: linear-gradient(135deg, #e6f7ff, #d6f0ff); padding: 15px; border-radius: 10px; border-left: 4px solid var(--primary);">
                        <h4 style="color: var(--primary); margin-bottom: 8px; font-size: 1.1rem;">
                            🎯 客观难度 (卡片外显示)
                        </h4>
                        <p style="color: #666; font-size: 0.95rem; line-height: 1.6;">
                            题目本身在知识、逻辑或技能层面上的复杂度。基于课程设计的渐进式学习路径，反映题目的理论难度等级。
                        </p>
                    </div>
                    <div style="background: linear-gradient(135deg, #fff9e6, #ffedd5); padding: 15px; border-radius: 10px; border-left: 4px solid var(--medium);">
                        <h4 style="color: var(--medium); margin-bottom: 8px; font-size: 1.1rem;">
                            💭 主观感受难度 (详情页显示)
                        </h4>
                        <p style="color: #666; font-size: 0.95rem; line-height: 1.6;">
                            <strong>仅供参考</strong> - 会因为题目难度变化坡度以及个人情绪、压力、学习状态等因素影响而有所不同。
                        </p>
                    </div>
                </div>
                <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; border: 1px solid #dee2e6;">
                    <p style="color: #666; font-size: 0.9rem; margin: 0; text-align: center;">
                        💡 <strong>提示：</strong>主观感受难度通常会比客观难度更高，这是正常的学习体验。深入学习时遇到的复杂性往往超出预期！
                    </p>
                </div>
            </div>
        </div>

        <!-- 按主题标签 -->
        <div id="category" class="content-section">
            <div class="category-section">
                <h2 class="category-title">📝 基础语法</h2>
                <div class="contracts-grid" id="basics-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">🪙 代币标准</h2>
                <div class="contracts-grid" id="tokens-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">💰 DeFi协议</h2>
                <div class="contracts-grid" id="defi-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">🔒 安全与优化</h2>
                <div class="contracts-grid" id="security-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">🎨 NFT与市场</h2>
                <div class="contracts-grid" id="nft-contracts"></div>
            </div>
            <div class="category-section">
                <h2 class="category-title">🏛️ 治理与DAO</h2>
                <div class="contracts-grid" id="governance-contracts"></div>
            </div>
        </div>

        <!-- 时间线标签 -->
        <div id="timeline" class="content-section">
            <div style="text-align: center; padding: 60px 20px;">
                <h2 style="font-family: 'Gochi Hand', cursive; color: var(--secondary); font-size: 2.5rem;">
                    30天学习路线图
                </h2>
                <p style="color: #666; font-size: 1.1rem; margin-top: 10px;">
                    详细的学习时间线视图即将推出...
                </p>
            </div>
        </div>
    </div>

    <script>
        const contracts = [
            {day: 1, title: 'ClickCounter', name: '点击计数器', desc: '学习基础语法、状态变量和函数', difficulty: 'easy', tags: ['基础', '状态变量', '函数'], category: 'basics'},
            {day: 2, title: 'SaveMyName', name: '保存我的名字', desc: '字符串存储、memory关键字和视图函数', difficulty: 'easy', tags: ['字符串', 'memory', 'view'], category: 'basics'},
            {day: 3, title: 'PollStation', name: '投票站', desc: '数组和映射的使用', difficulty: 'easy', tags: ['数组', '映射', '投票'], category: 'governance'},
            {day: 4, title: 'AuctionHouse', name: '拍卖行', desc: '全局变量、block.timestamp和复杂逻辑', difficulty: 'easy', tags: ['拍卖', 'timestamp', '竞价'], category: 'basics'},
            {day: 5, title: 'Admin-Only', name: '仅管理员合约', desc: '访问控制、修饰符和所有权管理', difficulty: 'easy', tags: ['modifier', '访问控制', 'onlyOwner'], category: 'basics'},
            {day: 6, title: 'The Ether Piggy Bank', name: '以太坊存钱罐', desc: 'ETH处理、payable和msg.value', difficulty: 'easy', tags: ['ETH', 'payable', 'msg.value'], category: 'basics'},
            {day: 7, title: 'Simple IOU', name: '简单欠条', desc: '嵌套映射和ETH转账方法', difficulty: 'easy', tags: ['嵌套映射', 'transfer', 'call'], category: 'basics'},
            {day: 8, title: 'TipJar', name: '小费罐', desc: '货币转换、wei单位和复杂计算', difficulty: 'medium', tags: ['货币', 'wei', '计算'], category: 'basics'},
            {day: 9, title: 'Smart Calculator', name: '智能计算器', desc: '合约间通信和函数调用', difficulty: 'medium', tags: ['合约调用', '接口', 'ABI'], category: 'basics'},
            {day: 10, title: 'ActivityTracker', name: '活动追踪器', desc: '结构体、事件和复杂数据管理', difficulty: 'medium', tags: ['结构体', '事件', '数据管理'], category: 'basics'},
            {day: 11, title: 'Masterkey', name: '主密钥', desc: '继承、事件和OpenZeppelin', difficulty: 'medium', tags: ['继承', '事件', 'OpenZeppelin'], category: 'basics'},
            {day: 12, title: 'MyFirstToken', name: '我的第一个代币', desc: 'ERC-20标准完整实现', difficulty: 'medium', tags: ['ERC-20', '代币', '标准'], category: 'tokens'},
            {day: 13, title: 'PreorderTokens', name: '预购代币', desc: '代币销售、时间锁和override', difficulty: 'medium', tags: ['代币销售', '时间锁', 'virtual'], category: 'tokens'},
            {day: 14, title: 'SafeDeposit', name: '安全保管箱', desc: '接口、抽象合约和继承体系', difficulty: 'hard', tags: ['接口', '抽象', '继承'], category: 'basics'},
            {day: 15, title: 'Gas-Efficient Voting', name: 'Gas优化投票', desc: 'Gas优化技术和位运算', difficulty: 'hard', tags: ['Gas优化', '位运算', '存储'], category: 'governance'},
            {day: 16, title: 'PluginStore', name: '插件商店', desc: 'call、delegatecall和模块化设计', difficulty: 'hard', tags: ['call', 'delegatecall', '模块化'], category: 'security'},
            {day: 17, title: 'UpgradeHub', name: '升级中心', desc: '可升级合约和代理模式', difficulty: 'hard', tags: ['代理', '升级', 'delegatecall'], category: 'security'},
            {day: 18, title: 'Oracle', name: '预言机合约', desc: 'Chainlink集成和真实世界数据', difficulty: 'hard', tags: ['Chainlink', '预言机', '价格馈送'], category: 'defi'},
            {day: 19, title: 'SignThis', name: '签名验证', desc: '数字签名、ecrecover和认证', difficulty: 'hard', tags: ['签名', 'ecrecover', '认证'], category: 'security'},
            {day: 20, title: 'FortKnox', name: '金库堡垒', desc: '重入攻击和防御策略', difficulty: 'hard', tags: ['重入', '安全', 'ReentrancyGuard'], category: 'security'},
            {day: 21, title: 'SimpleNFT', name: '简单NFT', desc: 'ERC-721从零实现', difficulty: 'expert', tags: ['ERC-721', 'NFT', '标准'], category: 'nft'},
            {day: 22, title: 'Decentralised Lottery', name: '去中心化彩票', desc: 'Chainlink VRF和可证明随机性', difficulty: 'expert', tags: ['VRF', '随机数', 'Chainlink'], category: 'defi'},
            {day: 23, title: 'LendingPool', name: '借贷池', desc: 'DeFi借贷、利息和抵押', difficulty: 'expert', tags: ['借贷', 'DeFi', '利息'], category: 'defi'},
            {day: 24, title: 'Decentralised Escrow', name: '去中心化托管', desc: '安全托管和争议解决', difficulty: 'expert', tags: ['托管', '安全', '仲裁'], category: 'defi'},
            {day: 25, title: 'Automated Market Maker', name: '自动做市商', desc: 'AMM核心机制和x*y=k公式', difficulty: 'expert', tags: ['AMM', 'DEX', '流动性'], category: 'defi'},
            {day: 26, title: 'NFT Marketplace', name: 'NFT市场', desc: '完整的NFT交易市场', difficulty: 'expert', tags: ['市场', 'NFT', '交易'], category: 'nft'},
            {day: 27, title: 'YieldFarming', name: '收益农场', desc: '质押、奖励和收益机制', difficulty: 'expert', tags: ['质押', '收益', '奖励'], category: 'defi'},
            {day: 28, title: 'Decentralised Governance', name: '去中心化治理', desc: 'DAO投票和治理机制', difficulty: 'expert', tags: ['DAO', '治理', '投票'], category: 'governance'},
            {day: 29, title: 'StableCoin', name: '稳定币', desc: '抵押型稳定币和Chainlink价格', difficulty: 'expert', tags: ['稳定币', '抵押', 'Chainlink'], category: 'defi'},
            {day: 30, title: 'Mini DEX', name: '迷你DEX', desc: '完整DEX实现 - 最终项目', difficulty: 'expert', tags: ['DEX', 'Factory', 'Pair'], category: 'defi'}
        ];

        function createContractCard(contract) {
            const isCompleted = getCompletionStatus(contract.day);
            return `
                <div class="contract-card ${contract.difficulty} ${isCompleted ? 'completed' : ''}" onclick="openContract(${contract.day})">
                    <div class="complete-btn ${isCompleted ? 'completed' : ''}" onclick="toggleCompletion(event, ${contract.day})" title="${isCompleted ? '标记为未完成' : '标记为已完成'}"></div>
                    <div class="card-header">
                        <div class="day-number">第${contract.day}天</div>
                        <div class="difficulty-badge ${contract.difficulty}">
                            ${contract.difficulty === 'easy' ? '基础' : contract.difficulty === 'medium' ? '中级' : contract.difficulty === 'hard' ? '高级' : '困难'}
                        </div>
                    </div>
                    <div class="contract-title">${contract.name}</div>
                    <div class="contract-desc">${contract.desc}</div>
                    <div class="tags">
                        ${contract.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `;
        }

        function loadContracts() {
            // 加载所有合约
            document.getElementById('all-contracts').innerHTML = contracts.map(createContractCard).join('');
            
            // 按难度加载
            document.getElementById('easy-contracts').innerHTML = 
                contracts.filter(c => c.difficulty === 'easy').map(createContractCard).join('');
            document.getElementById('medium-contracts').innerHTML = 
                contracts.filter(c => c.difficulty === 'medium').map(createContractCard).join('');
            document.getElementById('hard-contracts').innerHTML = 
                contracts.filter(c => c.difficulty === 'hard').map(createContractCard).join('');
            document.getElementById('expert-contracts').innerHTML = 
                contracts.filter(c => c.difficulty === 'expert').map(createContractCard).join('');
            
            // 按主题加载
            document.getElementById('basics-contracts').innerHTML = 
                contracts.filter(c => c.category === 'basics').map(createContractCard).join('');
            document.getElementById('tokens-contracts').innerHTML = 
                contracts.filter(c => c.category === 'tokens').map(createContractCard).join('');
            document.getElementById('defi-contracts').innerHTML = 
                contracts.filter(c => c.category === 'defi').map(createContractCard).join('');
            document.getElementById('security-contracts').innerHTML = 
                contracts.filter(c => c.category === 'security').map(createContractCard).join('');
            document.getElementById('nft-contracts').innerHTML = 
                contracts.filter(c => c.category === 'nft').map(createContractCard).join('');
            document.getElementById('governance-contracts').innerHTML = 
                contracts.filter(c => c.category === 'governance').map(createContractCard).join('');
        }

        function showTab(tabName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function openContract(day) {
            window.location.href = `contract-${day}.html`;
        }

        // 学习进度管理
        function getCompletionStatus(day) {
            const completed = JSON.parse(localStorage.getItem('completedContracts') || '[]');
            return completed.includes(day);
        }

        function setCompletionStatus(day, completed) {
            let completedList = JSON.parse(localStorage.getItem('completedContracts') || '[]');
            if (completed && !completedList.includes(day)) {
                completedList.push(day);
            } else if (!completed && completedList.includes(day)) {
                completedList = completedList.filter(d => d !== day);
            }
            localStorage.setItem('completedContracts', JSON.stringify(completedList));
            updateProgress();
        }

        function toggleCompletion(event, day) {
            event.stopPropagation(); // 防止触发卡片点击事件
            const currentStatus = getCompletionStatus(day);
            setCompletionStatus(day, !currentStatus);
            loadContracts(); // 重新加载卡片以更新样式
        }

        function updateProgress() {
            const completed = JSON.parse(localStorage.getItem('completedContracts') || '[]');
            const completedCount = completed.length;
            const totalCount = contracts.length;
            const percentage = Math.round((completedCount / totalCount) * 100);
            
            // 更新进度条
            const progressBar = document.querySelector('.progress-bar');
            const completedCountElement = document.getElementById('completed-count');
            
            if (progressBar) {
                progressBar.style.width = `${percentage}%`;
                progressBar.textContent = `${percentage}% 完成`;
            }
            
            if (completedCountElement) {
                completedCountElement.textContent = completedCount;
            }
        }

        // 重置进度功能（可选）
        function resetProgress() {
            if (confirm('确定要重置所有学习进度吗？')) {
                localStorage.removeItem('completedContracts');
                loadContracts();
                updateProgress();
            }
        }

        // 页面加载时初始化
        window.onload = () => {
            loadContracts();
            updateProgress(); // 加载真实进度而不是模拟数据
        };
    </script>

    <!-- 页面底部声明 -->
    <footer style="background: white; border-top: 3px dashed var(--accent); padding: 30px 20px; text-align: center; margin-top: 50px;">
        <div style="max-width: 800px; margin: 0 auto;">
            <p style="font-size: 1rem; color: #666; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; justify-content: center; flex-wrap: wrap;">
                <span>📚 题库来源</span>
                <a href="https://www.web3compass.xyz/challenge-calendar" target="_blank" style="color: var(--primary); text-decoration: none; transition: all 0.3s;">
                    🧭 Web3 Compass - 30天Solidity挑战
                </a>
            </p>
            <p style="font-size: 0.9rem; color: #888; line-height: 1.6;">
                本学习站点基于 Web3 Compass题库制作，旨在为中文开发者提供更好的入门学习体验。
            </p>
            <div style="margin-top: 15px; padding: 10px; background: rgba(0,0,0,0.05); border-radius: 8px;">
                <p style="font-size: 0.8rem; color: #666; margin: 0;">
                    📜 本项目采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" style="color: var(--primary); text-decoration: none;">CC BY-NC-SA 4.0</a> 协议开源
                </p>
            </div>
        </div>
    </footer>
</body>
</html>
